/*
Navicat MySQL Data Transfer

Source Server         : blogMe
Source Server Version : 50624
Source Host           : localhost:3306
Source Database       : blogme

Target Server Type    : MYSQL
Target Server Version : 50624
File Encoding         : 65001

Date: 2016-05-06 17:48:24
*/

SET FOREIGN_KEY_CHECKS=0;

-- ----------------------------
-- Table structure for c_blog
-- ----------------------------
DROP TABLE IF EXISTS `c_blog`;
CREATE TABLE `c_blog` (
  `blogId` int(11) NOT NULL AUTO_INCREMENT COMMENT '博客编号',
  `userId` int(11) DEFAULT NULL COMMENT '发布人',
  `blogTitle` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '博客标题',
  `blogContent` longtext COLLATE utf8_unicode_ci COMMENT '博客内容',
  `publishTime` datetime DEFAULT NULL COMMENT '发布时间',
  `attachments` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '附件',
  `views` int(255) DEFAULT NULL COMMENT '被查看次数',
  `contentWithNoHtml` text COLLATE utf8_unicode_ci,
  `status` int(11) NOT NULL DEFAULT '1' COMMENT '1:正常 2：删除',
  `type` int(11) DEFAULT '0' COMMENT '文章分类',
  PRIMARY KEY (`blogId`),
  KEY `f_c_blog` (`userId`),
  CONSTRAINT `f_c_blog` FOREIGN KEY (`userId`) REFERENCES `c_user` (`userId`)
) ENGINE=InnoDB AUTO_INCREMENT=50 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- ----------------------------
-- Records of c_blog
-- ----------------------------
INSERT INTO `c_blog` VALUES ('45', '2', '关于我', '<p align=\"justify\">\r\n	<span style=\"background-color:#FFFFFF;color:#999999;\">&nbsp;&nbsp;&nbsp;&nbsp;Ch&nbsp; Name: Hongliang Li</span>\r\n</p>\r\n<p align=\"justify\">\r\n	<span style=\"background-color:#FFFFFF;color:#999999;\">&nbsp;&nbsp;&nbsp;&nbsp;En&nbsp; Name: Victor Lee</span>\r\n</p>\r\n<p align=\"justify\">\r\n	<span style=\"background-color:#FFFFFF;color:#999999;\">&nbsp;&nbsp;&nbsp;&nbsp;Address: Huayang street, shuangliu ,chengdu of sichuan province</span>\r\n</p>\r\n<p align=\"justify\">\r\n	<span style=\"background-color:#FFFFFF;color:#999999;\">&nbsp;&nbsp;&nbsp;&nbsp;Hobby: movie , games of ARPG</span>\r\n</p>\r\n<p align=\"justify\">\r\n	<span style=\"background-color:#FFFFFF;color:#999999;\">&nbsp;&nbsp;&nbsp;&nbsp;Work: Java Engineer</span>\r\n</p>\r\n<p align=\"justify\">\r\n	<span style=\"background-color:#CCCCCC;color:#CCCCCC;\"><span style=\"background-color:#FFFFFF;color:#999999;\">&nbsp;&nbsp;&nbsp;&nbsp;Contact me: 766014185</span></span>\r\n</p>\r\n<p align=\"justify\">\r\n	&nbsp;&nbsp;&nbsp;&nbsp;.....\r\n</p>\r\n<p align=\"justify\">\r\n	&nbsp;&nbsp;&nbsp;&nbsp;....\r\n</p>\r\n<p align=\"justify\">\r\n	&nbsp;&nbsp;&nbsp;&nbsp;...\r\n</p>\r\n<p align=\"justify\">\r\n	&nbsp;&nbsp;&nbsp;&nbsp;..\r\n</p>\r\n<p align=\"justify\">\r\n	&nbsp;&nbsp;&nbsp;&nbsp;.<br />\r\n<span style=\"background-color:#CCCCCC;color:#CCCCCC;\"><span style=\"background-color:#FFFFFF;color:#999999;\"></span><span style=\"background-color:#FFFFFF;\"></span></span>\r\n</p>', '2016-04-21 11:10:39', null, '1', 'Ch Name: Hongliang Li\r\n\r\n\r\n	    En  Name: Victor Lee\r\n\r\n\r\n	    Address: Huayang street, shuangliu ,chengdu of sichuan province\r\n\r\n\r\n	    Hobby: movie , games of ARPG\r\n\r\n\r\n	    Work: Java Engineer\r\n\r\n\r\n	    Contact me: 766014185\r\n\r\n\r\n	    .....\r\n\r\n\r\n	    ....\r\n\r\n\r\n	    ...\r\n\r\n\r\n	    ..\r\n\r\n\r\n	    .', '1', '5');
INSERT INTO `c_blog` VALUES ('46', '2', 'Ehcache 配置文件详解', '<p class=\"MsoNormal\" style=\"text-align:center;\" align=\"center\">\r\n	<strong><span style=\"font-size:16pt;\"><span style=\"font-family:Times New Roman;\">Ehcache</span></span></strong><strong><span style=\"font-family:宋体;font-size:16pt;\">缓存配置</span></strong><strong></strong>\r\n</p>\r\n<p>\r\n	<br />\r\n</p>\r\n<table class=\"MsoTableGrid ke-zeroborder\" style=\"border-collapse:collapse;background:#6699ff;\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\r\n	<tbody>\r\n		<tr>\r\n			<td style=\"background-color:transparent;border:#ece9d8;\" width=\"568\">\r\n				<p class=\"MsoNormal\">\r\n					<strong><span style=\"font-size:small;\"><span style=\"font-family:宋体;\">简介</span></span></strong>\r\n				</p>\r\n			</td>\r\n		</tr>\r\n	</tbody>\r\n</table>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Cache</span></span><span style=\"font-family:宋体;font-size:9pt;\">的配置很灵活，官方提供的</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Cache</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置方式有好几种。你可以通过声明配置、在</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">xml</span></span><span style=\"font-family:宋体;font-size:9pt;\">中配置、在程序里配置或者调用构造方法时传入不同的参数。</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-family:宋体;font-size:9pt;\">你可以将</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Cache</span></span><span style=\"font-family:宋体;font-size:9pt;\">的配置从代码中剥离出来，也可以在使用运行时配置，所谓的运行时配置无非也就是在代码中配置。以下是运行时配置的好处：</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:-8.5pt;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp; </span></span></span><span style=\"font-family:宋体;font-size:9pt;\">在同一个地方配置所有的</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Cache</span></span><span style=\"font-family:宋体;font-size:9pt;\">，这样很容易管理</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Cache</span></span><span style=\"font-family:宋体;font-size:9pt;\">的内存和磁盘消耗。</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:-8.5pt;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp; </span></span></span><span style=\"font-family:宋体;font-size:9pt;\">发布时可更改</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Cache</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置。</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:-8.5pt;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp; </span></span></span><span style=\"font-family:宋体;font-size:9pt;\">可再安装阶段就检查出配置错误信息，而避免了运行时错误。</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-family:宋体;font-size:9pt;\">本文将会对</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">ehcache.xml</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置文件进行详细的阐述。在配置的时可以拷贝一个现有的</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">ehcache.xml</span></span><span style=\"font-family:宋体;font-size:9pt;\">，如果没有请点击<a href=\"http://ehcache.sf.net/ehcache.xml\">这里</a>去下载。</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p>\r\n	<br />\r\n</p>\r\n<table class=\"MsoTableGrid ke-zeroborder\" style=\"border-collapse:collapse;background:#6699ff;\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\r\n	<tbody>\r\n		<tr>\r\n			<td style=\"background-color:transparent;border:#ece9d8;\" width=\"568\">\r\n				<p class=\"MsoNormal\">\r\n					<strong><span><span style=\"font-size:small;\"><span style=\"font-family:Times New Roman;\">ehcache-failsafe.xml</span></span></span></strong>\r\n				</p>\r\n			</td>\r\n		</tr>\r\n	</tbody>\r\n</table>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-family:宋体;font-size:9pt;\">如果你调用了</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">CacheManager</span></span><span style=\"font-family:宋体;font-size:9pt;\">默认构造方法去创建</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">CacheManager</span></span><span style=\"font-family:宋体;font-size:9pt;\">的实例，此方法会到</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">classpath</span></span><span style=\"font-family:宋体;font-size:9pt;\">中找</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">ehcache.xml</span></span><span style=\"font-family:宋体;font-size:9pt;\">文件，否则它会到类路径下找</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">ehcache-failsafe.xml</span></span><span style=\"font-family:宋体;font-size:9pt;\">文件。而</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">ehcache-failsafe.xml</span></span><span style=\"font-family:宋体;font-size:9pt;\">被包含在</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">jar</span></span><span style=\"font-family:宋体;font-size:9pt;\">包中，所有它肯定能找的到。</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">ehcache-failsafe.xml</span></span><span style=\"font-family:宋体;font-size:9pt;\">提供了一个非常简单的默认配置，这样可以使用户在没有创建</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">ehcache.xml</span></span><span style=\"font-family:宋体;font-size:9pt;\">的情况下使用</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Ehcache</span></span><span style=\"font-family:宋体;font-size:9pt;\">。</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-family:宋体;font-size:9pt;\">不过这样做</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Ehcache</span></span><span style=\"font-family:宋体;font-size:9pt;\">会提醒用户创建一个正确的</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Ehcache</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置。</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">ehcache.xml</span></span><span style=\"font-family:宋体;font-size:9pt;\">片段：</span>\r\n</p>\r\n<pre><span style=\"color:#3c3e29;\"><span style=\"font-size:x-small;\"><span style=\"font-family:Courier New;\">&lt;ehcache&gt;</span></span></span></pre>\r\n<pre><span style=\"color:#3c3e29;\"><span style=\"font-size:x-small;\"><span style=\"font-family:Courier New;\"><span>&nbsp;&nbsp;&nbsp; </span>&lt;diskStore path=\"java.io.tmpdir\"/&gt;</span></span></span></pre>\r\n<pre><span style=\"color:#3c3e29;\"><span style=\"font-size:x-small;\"><span style=\"font-family:Courier New;\"><span>&nbsp;&nbsp;&nbsp; </span>&lt;defaultCache</span></span></span></pre>\r\n<pre><span style=\"color:#3c3e29;\"><span style=\"font-size:x-small;\"><span style=\"font-family:Courier New;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>maxElementsInMemory=\"10000\"</span></span></span></pre>\r\n<pre><span style=\"color:#3c3e29;\"><span style=\"font-size:x-small;\"><span style=\"font-family:Courier New;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>eternal=\"false\"</span></span></span></pre>\r\n<pre><span style=\"color:#3c3e29;\"><span style=\"font-size:x-small;\"><span style=\"font-family:Courier New;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>timeToIdleSeconds=\"120\"</span></span></span></pre>\r\n<pre><span style=\"color:#3c3e29;\"><span style=\"font-size:x-small;\"><span style=\"font-family:Courier New;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>timeToLiveSeconds=\"120\"</span></span></span></pre>\r\n<pre><span style=\"color:#3c3e29;\"><span style=\"font-size:x-small;\"><span style=\"font-family:Courier New;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>overflowToDisk=\"true\"</span></span></span></pre>\r\n<pre><span style=\"color:#3c3e29;\"><span style=\"font-size:x-small;\"><span style=\"font-family:Courier New;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>maxElementsOnDisk=\"10000000\"</span></span></span></pre>\r\n<pre><span style=\"color:#3c3e29;\"><span style=\"font-size:x-small;\"><span style=\"font-family:Courier New;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>diskPersistent=\"false\"</span></span></span></pre>\r\n<pre><span style=\"color:#3c3e29;\"><span style=\"font-size:x-small;\"><span style=\"font-family:Courier New;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>diskExpiryThreadIntervalSeconds=\"120\"</span></span></span></pre>\r\n<pre><span style=\"color:#3c3e29;\"><span style=\"font-size:x-small;\"><span style=\"font-family:Courier New;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>memoryStoreEvictionPolicy=\"LRU\"</span></span></span></pre>\r\n<pre><span style=\"color:#3c3e29;\"><span style=\"font-size:x-small;\"><span style=\"font-family:Courier New;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>/&gt;</span></span></span></pre>\r\n<pre><span style=\"color:#3c3e29;\"><span style=\"font-size:x-small;\"><span style=\"font-family:Courier New;\">&lt;/ehcache&gt;</span></span></span></pre>\r\n<p>\r\n	<br />\r\n</p>\r\n<table class=\"MsoTableGrid ke-zeroborder\" style=\"border-collapse:collapse;background:#6699ff;\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\r\n	<tbody>\r\n		<tr>\r\n			<td style=\"background-color:transparent;border:#ece9d8;\" width=\"568\">\r\n				<p class=\"MsoNormal\">\r\n					<span style=\"font-size:small;\"><strong><span><span style=\"font-family:Times New Roman;\">ehcache.xml</span></span></strong><strong><span style=\"font-family:宋体;\">和其他配置文件</span></strong><strong></strong></span>\r\n				</p>\r\n			</td>\r\n		</tr>\r\n	</tbody>\r\n</table>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-family:宋体;font-size:9pt;\">在</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Ehcache-1.6</span></span><span style=\"font-family:宋体;font-size:9pt;\">之前的版本，只支持</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">ASCII</span></span><span style=\"font-family:宋体;font-size:9pt;\">编码的</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">ehcache.xml</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置文件。在</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Ehcach-1.6</span></span><span style=\"font-family:宋体;font-size:9pt;\">之后版本中，支持</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">UTF8</span></span><span style=\"font-family:宋体;font-size:9pt;\">编码的</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">ehcache.xml</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置文件。因为向后兼容，所有采用</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">ASCII</span></span><span style=\"font-family:宋体;font-size:9pt;\">编码的配置文件完全没有必要转换为</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">UTF8</span></span><span style=\"font-family:宋体;font-size:9pt;\">。</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-family:宋体;font-size:9pt;\">一个</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">CacheManager</span></span><span style=\"font-family:宋体;font-size:9pt;\">必须要有一个</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">XML</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置。由于磁盘路径或是监听端口，多个</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">CacheManager</span></span><span style=\"font-family:宋体;font-size:9pt;\">使用同一个配置文件时会出现错误。</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-family:宋体;font-size:9pt;\">下面是</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">ehcache.xml</span></span><span style=\"font-family:宋体;font-size:9pt;\">具体实例以及配置指南</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"color:#3c3e29;\"><span style=\"font-family:Times New Roman;\"><span style=\"font-size:small;\">&lt;ehcache xmlns:xsi=http://www.w3.org/2001/XMLSchema-instance</span></span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"color:#3c3e29;\"><span style=\"font-family:Times New Roman;font-size:small;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:-8.5pt;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">CacheManager</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">DmulticastGroupPort=4446</span></span><span style=\"font-family:宋体;font-size:9pt;\">，这样可以配置监听端口。</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:-8.5pt;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">DiskStore</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-family:宋体;font-size:9pt;\">如果你使用的</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">DiskStore</span></span><span style=\"font-family:宋体;font-size:9pt;\">（磁盘缓存），你必须要配置</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">DiskStore</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置项。如果不配置，</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Ehcache</span></span><span style=\"font-family:宋体;font-size:9pt;\">将会使用</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">java.io.tmpdir</span></span><span style=\"font-family:宋体;font-size:9pt;\">。</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">diskStroe</span></span><span style=\"font-family:宋体;font-size:9pt;\">的“</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">path</span></span><span style=\"font-family:宋体;font-size:9pt;\">”属性是用来配置磁盘缓存使用的物理路径的，</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Ehcache</span></span><span style=\"font-family:宋体;font-size:9pt;\">磁盘缓存使用的文件后缀名是</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">.data</span></span><span style=\"font-family:宋体;font-size:9pt;\">和</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">.index</span></span><span style=\"font-family:宋体;font-size:9pt;\">。</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&lt;disStore path=”java.io.tmpdir”/&gt;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:-8.5pt;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">CacheManagerEventListener</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-family:宋体;font-size:9pt;\">我们通过</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">CacheManagerEventListenerFactory</span></span><span style=\"font-family:宋体;font-size:9pt;\">可以实例化一个</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">CacheManagerPeerProvider</span></span><span style=\"font-family:宋体;font-size:9pt;\">，当我们从</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">CacheManager</span></span><span style=\"font-family:宋体;font-size:9pt;\">中</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">added</span></span><span style=\"font-family:宋体;font-size:9pt;\">和</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">removed Cache</span></span><span style=\"font-family:宋体;font-size:9pt;\">时，将通知</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">CacheManagerPeerProvider</span></span><span style=\"font-family:宋体;font-size:9pt;\">，这样一来，我们就可以很方面的对</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">CacheManager</span></span><span style=\"font-family:宋体;font-size:9pt;\">中的</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Cache</span></span><span style=\"font-family:宋体;font-size:9pt;\">做一些统计。</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-family:宋体;font-size:9pt;\">注册到</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">CacheManager</span></span><span style=\"font-family:宋体;font-size:9pt;\">的事件监听类名有：</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"> adding a Cache</span></span><span style=\"font-family:宋体;font-size:9pt;\">和</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">removing a Cache</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&lt;cacheManagerEventListenerFacotory class=”” properties=””/&gt;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:-8.5pt;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">CacheManagerPeerProvider</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-family:宋体;font-size:9pt;\">在集群中</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">CacheManager</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">CacheManagerPeerProviderFactory</span></span><span style=\"font-family:宋体;font-size:9pt;\">创建</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">CacheManagerPeerProvider</span></span><span style=\"font-family:宋体;font-size:9pt;\">。具体的实例如下：</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&lt;cacheManagerPeerProviderFactoryclass=\"net.sf.ehcache.distribution.</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">RMICacheManagerPeerProviderFactory</span><a name=\"OLE_LINK1\"></a><span style=\"font-family:Times New Roman;\">\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">properties=\"peerDiscovery=manual,\r\n rmiUrls=//server1:40000/sampleCache1|//server2:40000/sampleCache1| \r\n//server1:40000/sampleCache2|//server2:40000/sampleCache2\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">propertySeparator=\",\" /&gt;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:-8.5pt;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">CacheManagerPeerListener</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">CacheManagerPeerListener</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置是用来监听集群中缓存消息的分发的。</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&lt;cacheManagerPeerListenerFactory</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp; </span>class=\"net.sf.ehcache.distribution.RMICacheManagerPeerListenerFactory\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp; </span>properties=\"hostName=fully_qualified_hostname_or_ip,</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>port=40001,</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>&nbsp;&nbsp;</span>socketTimeoutMillis=120000\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>propertySeparator=\",\" /&gt;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:-8.5pt;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Cache</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:0cm;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">name</span></span><span style=\"font-family:宋体;font-size:9pt;\">：</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Cache</span></span><span style=\"font-family:宋体;font-size:9pt;\">的唯一标识</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:0cm;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">maxElementsInMemory</span></span><span style=\"font-family:宋体;font-size:9pt;\">：内存中最大缓存对象数。</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:0cm;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">maxElementsOnDisk</span></span><span style=\"font-family:宋体;font-size:9pt;\">：磁盘中最大缓存对象数，若是</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">0</span></span><span style=\"font-family:宋体;font-size:9pt;\">表示无穷大。</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:0cm;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">eternal</span></span><span style=\"font-family:宋体;font-size:9pt;\">：</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Element</span></span><span style=\"font-family:宋体;font-size:9pt;\">是否永久有效，一但设置了，</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">timeout</span></span><span style=\"font-family:宋体;font-size:9pt;\">将不起作用。</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:0cm;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">overflowToDisk</span></span><span style=\"font-family:宋体;font-size:9pt;\">：配置此属性，当内存中</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Element</span></span><span style=\"font-family:宋体;font-size:9pt;\">数量达到</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">maxElementsInMemory</span></span><span style=\"font-family:宋体;font-size:9pt;\">时，</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Ehcache</span></span><span style=\"font-family:宋体;font-size:9pt;\">将会</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Element</span></span><span style=\"font-family:宋体;font-size:9pt;\">写到磁盘中。</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:0cm;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">timeToIdleSeconds</span></span><span style=\"font-family:宋体;font-size:9pt;\">：设置</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Element</span></span><span style=\"font-family:宋体;font-size:9pt;\">在失效前的允许闲置时间。仅当</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">element</span></span><span style=\"font-family:宋体;font-size:9pt;\">不是永久有效时使用，可选属性，默认值是</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">0</span></span><span style=\"font-family:宋体;font-size:9pt;\">，也就是可闲置时间无穷大。</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:0cm;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">timeToLiveSeconds</span></span><span style=\"font-family:宋体;font-size:9pt;\">：设置</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Element</span></span><span style=\"font-family:宋体;font-size:9pt;\">在失效前允许存活时间。最大时间介于创建时间和失效时间之间。仅当</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">element</span></span><span style=\"font-family:宋体;font-size:9pt;\">不是永久有效时使用，默认是</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">0.</span></span><span style=\"font-family:宋体;font-size:9pt;\">，也就是</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">element</span></span><span style=\"font-family:宋体;font-size:9pt;\">存活时间无穷大。</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:0cm;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">diskPersistent</span></span><span style=\"font-family:宋体;font-size:9pt;\">：是否缓存虚拟机重启期数据。（这个虚拟机是指什么虚拟机一直没看明白是什么</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">,</span></span><span style=\"font-family:宋体;font-size:9pt;\">有高人还希望能指点一二）。</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:0cm;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">diskExpiryThreadIntervalSeconds</span></span><span style=\"font-family:宋体;font-size:9pt;\">：磁盘失效线程运行时间间隔，默认是</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">120</span></span><span style=\"font-family:宋体;font-size:9pt;\">秒。</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:0cm;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">diskSpoolBufferSizeMB</span></span><span style=\"font-family:宋体;font-size:9pt;\">：这个参数设置</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">DiskStore</span></span><span style=\"font-family:宋体;font-size:9pt;\">（磁盘缓存）的缓存区大小。默认是</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">30MB</span></span><span style=\"font-family:宋体;font-size:9pt;\">。每个</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Cache</span></span><span style=\"font-family:宋体;font-size:9pt;\">都应该有自己的一个缓冲区。</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:0cm;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">memoryStoreEvictionPolicy</span></span><span style=\"font-family:宋体;font-size:9pt;\">：当达到</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">maxElementsInMemory</span></span><span style=\"font-family:宋体;font-size:9pt;\">限制时，</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Ehcache</span></span><span style=\"font-family:宋体;font-size:9pt;\">将会根据指定的策略去清理内存。默认策略是</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">LRU</span></span><span style=\"font-family:宋体;font-size:9pt;\">（最近最少使用）。你可以设置为</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">FIFO</span></span><span style=\"font-family:宋体;font-size:9pt;\">（先进先出）或是</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">LFU</span></span><span style=\"font-family:宋体;font-size:9pt;\">（较少使用）。这里比较遗憾，</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Ehcache</span></span><span style=\"font-family:宋体;font-size:9pt;\">并没有提供一个用户定制策略的接口，仅仅支持三种指定策略，感觉做的不够理想。</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:-8.5pt;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Cache Exception Handling</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&lt;cacheExceptionHandlerFactory class=\"com.example.ExampleExceptionHandlerFactory\"<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>properties=\"logLevel=FINE\"/&gt;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p>\r\n	<br />\r\n</p>\r\n<table class=\"MsoTableGrid ke-zeroborder\" style=\"border-collapse:collapse;background:#6699ff;\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\r\n	<tbody>\r\n		<tr>\r\n			<td style=\"background-color:transparent;border:#ece9d8;\" width=\"568\">\r\n				<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n					<span style=\"font-size:small;\"><strong><span style=\"font-family:宋体;\">总结</span></strong><strong></strong></span>\r\n				</p>\r\n			</td>\r\n		</tr>\r\n	</tbody>\r\n</table>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-family:宋体;font-size:9pt;\">这里只对通用缓存的配置做了详细的阐述，至于</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">RMI</span></span><span style=\"font-family:宋体;font-size:9pt;\">缓存和集群缓存可以参考<a href=\"http://ehcache.sourceforge.net/EhcacheUserGuide.html\">这里</a>。</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-family:宋体;font-size:9pt;\">下面给出几个配置示例：</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:-8.5pt;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Ehcache</span></span><span style=\"font-family:宋体;font-size:9pt;\">默认</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Cache</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&lt;defaultCache</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>maxElementsInMemory=\"10000\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>eternal=\"false\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>timeToIdleSeconds=\"120\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>timeToLiveSeconds=\"120\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>overflowToDisk=\"true\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>diskSpoolBufferSizeMB=\"30\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>maxElementsOnDisk=\"10000000\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>diskPersistent=\"false\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>diskExpiryThreadIntervalSeconds=\"120\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>memoryStoreEvictionPolicy=\"LRU\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/&gt;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:-8.5pt;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">SampleCache1</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置</span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\">\r\n	<span style=\"font-family:宋体;font-size:9pt;\">简单配置，在</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">ehcache.xml</span></span><span style=\"font-family:宋体;font-size:9pt;\">文件中有此配置，在使用</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Ehcache</span></span><span style=\"font-family:宋体;font-size:9pt;\">前最好将其删除掉，自己配置。</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-family:宋体;font-size:9pt;\">缓存名</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">sampleCache1</span></span><span style=\"font-family:宋体;font-size:9pt;\">，内存中最多可缓存</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">10000</span></span><span style=\"font-family:宋体;font-size:9pt;\">个</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Element</span></span><span style=\"font-family:宋体;font-size:9pt;\">，其中的</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">element</span></span><span style=\"font-family:宋体;font-size:9pt;\">会在闲置</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">5</span></span><span style=\"font-family:宋体;font-size:9pt;\">分钟或是存活</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">10</span></span><span style=\"font-family:宋体;font-size:9pt;\">分钟之后失效。</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-family:宋体;font-size:9pt;\">超过</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">10000element</span></span><span style=\"font-family:宋体;font-size:9pt;\">时，</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">element</span></span><span style=\"font-family:宋体;font-size:9pt;\">将会输出到磁盘中，输出路径是</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">java.io.tmpdir</span></span><span style=\"font-family:宋体;font-size:9pt;\">。</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&lt;cache name=\"sampleCache1\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>maxElementsInMemory=\"10000\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>maxElementsOnDisk=\"1000\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>eternal=\"false\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>overflowToDisk=\"true\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>diskSpoolBufferSizeMB=\"20\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>timeToIdleSeconds=\"300\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>timeToLiveSeconds=\"600\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>memoryStoreEvictionPolicy=\"LFU\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/&gt;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:-8.5pt;\">\r\n	<a name=\"OLE_LINK2\"></a><span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">SampleCache2</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Cache</span></span><span style=\"font-family:宋体;font-size:9pt;\">名为</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">SampleCache2</span></span><span style=\"font-family:宋体;font-size:9pt;\">，内存中最多可以缓存</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">1000</span></span><span style=\"font-family:宋体;font-size:9pt;\">个</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">element</span></span><span style=\"font-family:宋体;font-size:9pt;\">，超出</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">1000</span></span><span style=\"font-family:宋体;font-size:9pt;\">不能输出到磁盘中。缓存是永久有效的。</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&lt;cache name=\"sampleCache2\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>maxElementsInMemory=\"1000\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>eternal=\"true\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>overflowToDisk=\"false\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>memoryStoreEvictionPolicy=\"FIFO\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/&gt;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:-8.5pt;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">SampleCache3</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Cache</span></span><span style=\"font-family:宋体;font-size:9pt;\">名为</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">SampleCache3</span></span><span style=\"font-family:宋体;font-size:9pt;\">。可缓存到磁盘。磁盘缓存将会缓存虚拟机重启期的数据。磁盘缓存失效线程运行间隔时间是</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">10</span></span><span style=\"font-family:宋体;font-size:9pt;\">分钟。</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&lt;cache name=\"sampleCache3\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>&nbsp;</span>maxElementsInMemory=\"500\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>eternal=\"false\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>overflowToDisk=\"true\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>timeToIdleSeconds=\"300\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>timeToLiveSeconds=\"600\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>diskPersistent=\"true\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>diskExpiryThreadIntervalSeconds=\"1\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>memoryStoreEvictionPolicy=\"LFU\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp; </span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>/&gt;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:-8.5pt;\">\r\n	<a name=\"OLE_LINK4\"></a><span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">sampleDistributedCache1</span></span><span><span style=\"font-family:宋体;font-size:9pt;\">配置</span></span><span></span>\r\n</p>\r\n<p>\r\n	&nbsp;\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Cache</span></span><span style=\"font-family:宋体;font-size:9pt;\">名为</span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">sampleDistributedCache1</span></span><span style=\"font-family:宋体;font-size:9pt;\">。</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&lt;cache name=\"sampleDistributedCache1\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>maxElementsInMemory=\"10\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>eternal=\"false\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>timeToIdleSeconds=\"100\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>timeToLiveSeconds=\"100\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>overflowToDisk=\"false\"&gt;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp; </span><span>&nbsp;&nbsp;</span>&lt;cacheEventListenerFactory</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>class=\"net.sf.ehcache.distribution.RMICacheReplicatorFactory\"/&gt;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp; </span>&lt;bootstrapCacheLoaderFactory</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>class=\"net.sf.ehcache.distribution.RMIBootstrapCacheLoaderFactory\"/&gt;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&lt;/cache&gt;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:-8.5pt;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">sampleDistributedCache2</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&lt;cache name=\"sampleDistributedCache2\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>maxElementsInMemory=\"10\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>eternal=\"false\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>timeToIdleSeconds=\"100\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>timeToLiveSeconds=\"100\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>overflowToDisk=\"false\"&gt;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp; </span>&lt;cacheEventListenerFactory</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>class=\"net.sf.ehcache.distribution.RMICacheReplicatorFactory\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>properties=\"replicateAsynchronously=false, replicatePuts=false,</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>replicateUpdates=true, replicateUpdatesViaCopy=true,</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>replicateRemovals=false\"/&gt;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&lt;/cache&gt;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-indent:-8.5pt;\">\r\n	<span style=\"font-family:Symbol;color:#999999;\"><span><span style=\"font-size:small;\">·</span><span>&nbsp;&nbsp; </span></span></span><span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">sampleDistributedCache3</span></span><span style=\"font-family:宋体;font-size:9pt;\">配置</span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&nbsp;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&lt;!--</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">Sample distributed cache named sampleDistributedCache3.</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">This cache replicates using defaults except that the asynchronous replication</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">interval is set to 200ms.</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">--&gt;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&lt;cache name=\"sampleDistributedCache3\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>maxElementsInMemory=\"10\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>eternal=\"false\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>timeToIdleSeconds=\"100\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>timeToLiveSeconds=\"100\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>overflowToDisk=\"false\"&gt;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp; </span>&lt;cacheEventListenerFactory</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>class=\"net.sf.ehcache.distribution.RMICacheReplicatorFactory\"</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>properties=\"asynchronousReplicationIntervalMillis=200\"/&gt;</span></span>\r\n</p>\r\n<p class=\"MsoNormal\" style=\"text-align:left;\" align=\"left\">\r\n	<span style=\"font-size:9pt;\"><span style=\"font-family:Times New Roman;\">&lt;/cache&gt;</span></span>\r\n</p>', '2016-04-25 15:49:39', null, '1', 'Ehcache缓存配置\r\n\r\n\r\n	\r\n\r\n\r\n	\r\n		\r\n			\r\n				\r\n					简介\r\n				\r\n			\r\n		\r\n	\r\n\r\n\r\n	\r\n\r\n\r\n	Cache的配置很灵活，官方提供的Cache配置方式有好几种。你可以通过声明配置、在xml中配置、在程序里配置或者调用构造方法时传入不同的参数。\r\n\r\n\r\n	 \r\n\r\n\r\n	你可以将Cache的配置从代码中剥离出来，也可以在使用运行时配置，所谓的运行时配置无非也就是在代码中配置。以下是运行时配置的好处：\r\n\r\n\r\n	 \r\n\r\n\r\n	·   在同一个地方配置所有的Cache，这样很容易管理Cache的内存和磁盘消耗。\r\n\r\n\r\n	·   发布时可更改Cache配置。\r\n\r\n\r\n	·   可再安装阶段就检查出配置错误信息，而避免了运行时错误。\r\n\r\n\r\n	 \r\n\r\n\r\n	本文将会对ehcache.xml配置文件进行详细的阐述。在配置的时可以拷贝一个现有的ehcache.xml，如果没有请点击这里去下载。\r\n\r\n\r\n	 \r\n\r\n\r\n	\r\n\r\n\r\n	\r\n		\r\n			\r\n				\r\n					ehcache-failsafe.xml\r\n				\r\n			\r\n		\r\n	\r\n\r\n\r\n	 \r\n\r\n\r\n	如果你调用了CacheManager默认构造方法去创建CacheManager的实例，此方法会到classpath中找ehcache.xml文件，否则它会到类路径下找ehcache-failsafe.xml文件。而ehcache-failsafe.xml被包含在jar包中，所有它肯定能找的到。\r\n\r\n\r\n	 \r\n\r\n\r\n	ehcache-failsafe.xml提供了一个非常简单的默认配置，这样可以使用户在没有创建ehcache.xml的情况下使用Ehcache。\r\n\r\n\r\n	 \r\n\r\n\r\n	不过这样做Ehcache会提醒用户创建一个正确的Ehcache配置。\r\n\r\n\r\n	 \r\n\r\n\r\n	ehcache.xml片段：\r\n\r\n&lt;ehcache&gt;\r\n    &lt;diskStore path=\"java.io.tmpdir\"/&gt;\r\n    &lt;defaultCache\r\n            maxElementsInMemory=\"10000\"\r\n            eternal=\"false\"\r\n            timeToIdleSeconds=\"120\"\r\n            timeToLiveSeconds=\"120\"\r\n            overflowToDisk=\"true\"\r\n            maxElementsOnDisk=\"10000000\"\r\n            diskPersistent=\"false\"\r\n            diskExpiryThreadIntervalSeconds=\"120\"\r\n            memoryStoreEvictionPolicy=\"LRU\"\r\n            /&gt;\r\n&lt;/ehcache&gt;\r\n\r\n	\r\n\r\n\r\n	\r\n		\r\n			\r\n				\r\n					ehcache.xml和其他配置文件\r\n				\r\n			\r\n		\r\n	\r\n\r\n\r\n	 \r\n\r\n\r\n	在Ehcache-1.6之前的版本，只支持ASCII编码的ehcache.xml配置文件。在Ehcach-1.6之后版本中，支持UTF8编码的ehcache.xml配置文件。因为向后兼容，所有采用ASCII编码的配置文件完全没有必要转换为UTF8。\r\n\r\n\r\n	 \r\n\r\n\r\n	一个CacheManager必须要有一个XML配置。由于磁盘路径或是监听端口，多个CacheManager使用同一个配置文件时会出现错误。\r\n\r\n\r\n	 \r\n\r\n\r\n	下面是ehcache.xml具体实例以及配置指南\r\n\r\n\r\n	 \r\n\r\n\r\n	&lt;ehcache xmlns:xsi=http://www.w3.org/2001/XMLSchema-instance\r\n\r\n\r\n	 \r\n\r\n\r\n	·   CacheManager配置\r\n\r\n\r\n	 \r\n\r\n\r\n	DmulticastGroupPort=4446，这样可以配置监听端口。\r\n\r\n\r\n	 \r\n\r\n\r\n	·   DiskStore配置\r\n\r\n\r\n	 \r\n\r\n\r\n	如果你使用的DiskStore（磁盘缓存），你必须要配置DiskStore配置项。如果不配置，Ehcache将会使用java.io.tmpdir。\r\n\r\n\r\n	 \r\n\r\n\r\n	diskStroe的“path”属性是用来配置磁盘缓存使用的物理路径的，Ehcache磁盘缓存使用的文件后缀名是.data和.index。\r\n\r\n\r\n	 \r\n\r\n\r\n	&lt;disStore path=”java.io.tmpdir”/&gt;\r\n\r\n\r\n	 \r\n\r\n\r\n	·   CacheManagerEventListener配置\r\n\r\n\r\n	 \r\n\r\n\r\n	我们通过CacheManagerEventListenerFactory可以实例化一个CacheManagerPeerProvider，当我们从CacheManager中added和removed Cache时，将通知CacheManagerPeerProvider，这样一来，我们就可以很方面的对CacheManager中的Cache做一些统计。\r\n\r\n\r\n	 \r\n\r\n\r\n	注册到CacheManager的事件监听类名有： adding a Cache和removing a Cache\r\n\r\n\r\n	 \r\n\r\n\r\n	&lt;cacheManagerEventListenerFacotory class=”” properties=””/&gt;\r\n\r\n\r\n	 \r\n\r\n\r\n	·   CacheManagerPeerProvider配置\r\n\r\n\r\n	 \r\n\r\n\r\n	在集群中CacheManager配置CacheManagerPeerProviderFactory创建CacheManagerPeerProvider。具体的实例如下：\r\n\r\n\r\n	&lt;cacheManagerPeerProviderFactoryclass=\"net.sf.ehcache.distribution.\r\n\r\n\r\n	RMICacheManagerPeerProviderFactory\"\r\n\r\n\r\n	properties=\"peerDiscovery=manual,\r\n rmiUrls=//server1:40000/sampleCache1|//server2:40000/sampleCache1| \r\n//server1:40000/sampleCache2|//server2:40000/sampleCache2\"\r\n\r\n\r\n	propertySeparator=\",\" /&gt;\r\n\r\n\r\n	·   CacheManagerPeerListener配置\r\n\r\n\r\n	 \r\n\r\n\r\n	CacheManagerPeerListener配置是用来监听集群中缓存消息的分发的。\r\n\r\n\r\n	 \r\n\r\n\r\n	&lt;cacheManagerPeerListenerFactory\r\n\r\n\r\n	    class=\"net.sf.ehcache.distribution.RMICacheManagerPeerListenerFactory\"\r\n\r\n\r\n	    properties=\"hostName=fully_qualified_hostname_or_ip,\r\n\r\n\r\n	                port=40001,\r\n\r\n\r\n	                socketTimeoutMillis=120000\"\r\n\r\n\r\n	                propertySeparator=\",\" /&gt;\r\n\r\n\r\n	·   Cache配置\r\n\r\n\r\n	 \r\n\r\n\r\n	·           name：Cache的唯一标识\r\n\r\n\r\n	·           maxElementsInMemory：内存中最大缓存对象数。\r\n\r\n\r\n	·           maxElementsOnDisk：磁盘中最大缓存对象数，若是0表示无穷大。\r\n\r\n\r\n	·           eternal：Element是否永久有效，一但设置了，timeout将不起作用。\r\n\r\n\r\n	·           overflowToDisk：配置此属性，当内存中Element数量达到maxElementsInMemory时，Ehcache将会Element写到磁盘中。\r\n\r\n\r\n	·           timeToIdleSeconds：设置Element在失效前的允许闲置时间。仅当element不是永久有效时使用，可选属性，默认值是0，也就是可闲置时间无穷大。\r\n\r\n\r\n	·           timeToLiveSeconds：设置Element在失效前允许存活时间。最大时间介于创建时间和失效时间之间。仅当element不是永久有效时使用，默认是0.，也就是element存活时间无穷大。\r\n\r\n\r\n	·           diskPersistent：是否缓存虚拟机重启期数据。（这个虚拟机是指什么虚拟机一直没看明白是什么,有高人还希望能指点一二）。\r\n\r\n\r\n	·           diskExpiryThreadIntervalSeconds：磁盘失效线程运行时间间隔，默认是120秒。\r\n\r\n\r\n	·           diskSpoolBufferSizeMB：这个参数设置DiskStore（磁盘缓存）的缓存区大小。默认是30MB。每个Cache都应该有自己的一个缓冲区。\r\n\r\n\r\n	·           memoryStoreEvictionPolicy：当达到maxElementsInMemory限制时，Ehcache将会根据指定的策略去清理内存。默认策略是LRU（最近最少使用）。你可以设置为FIFO（先进先出）或是LFU（较少使用）。这里比较遗憾，Ehcache并没有提供一个用户定制策略的接口，仅仅支持三种指定策略，感觉做的不够理想。\r\n\r\n\r\n	 \r\n\r\n\r\n	·   Cache Exception Handling配置\r\n\r\n\r\n	 \r\n\r\n\r\n	&lt;cacheExceptionHandlerFactory class=\"com.example.ExampleExceptionHandlerFactory\"                               properties=\"logLevel=FINE\"/&gt;\r\n\r\n\r\n	 \r\n\r\n\r\n	\r\n\r\n\r\n	\r\n		\r\n			\r\n				\r\n					总结\r\n				\r\n			\r\n		\r\n	\r\n\r\n\r\n	 \r\n\r\n\r\n	这里只对通用缓存的配置做了详细的阐述，至于RMI缓存和集群缓存可以参考这里。\r\n\r\n\r\n	 \r\n\r\n\r\n	下面给出几个配置示例：\r\n\r\n\r\n	 \r\n\r\n\r\n	·   Ehcache默认Cache配置\r\n\r\n\r\n	 \r\n\r\n\r\n	&lt;defaultCache\r\n\r\n\r\n	        maxElementsInMemory=\"10000\"\r\n\r\n\r\n	        eternal=\"false\"\r\n\r\n\r\n	        timeToIdleSeconds=\"120\"\r\n\r\n\r\n	        timeToLiveSeconds=\"120\"\r\n\r\n\r\n	        overflowToDisk=\"true\"\r\n\r\n\r\n	        diskSpoolBufferSizeMB=\"30\"\r\n\r\n\r\n	        maxElementsOnDisk=\"10000000\"\r\n\r\n\r\n	        diskPersistent=\"false\"\r\n\r\n\r\n	        diskExpiryThreadIntervalSeconds=\"120\"\r\n\r\n\r\n	        memoryStoreEvictionPolicy=\"LRU\"\r\n\r\n\r\n	        /&gt;\r\n\r\n\r\n	 \r\n\r\n\r\n	·   SampleCache1配置\r\n\r\n\r\n	 \r\n\r\n\r\n	简单配置，在ehcache.xml文件中有此配置，在使用Ehcache前最好将其删除掉，自己配置。\r\n\r\n\r\n	 \r\n\r\n\r\n	缓存名sampleCache1，内存中最多可缓存10000个Element，其中的element会在闲置5分钟或是存活10分钟之后失效。\r\n\r\n\r\n	 \r\n\r\n\r\n	超过10000element时，element将会输出到磁盘中，输出路径是java.io.tmpdir。\r\n\r\n\r\n	 \r\n\r\n\r\n	&lt;cache name=\"sampleCache1\"\r\n\r\n\r\n	       maxElementsInMemory=\"10000\"\r\n\r\n\r\n	       maxElementsOnDisk=\"1000\"\r\n\r\n\r\n	       eternal=\"false\"\r\n\r\n\r\n	       overflowToDisk=\"true\"\r\n\r\n\r\n	       diskSpoolBufferSizeMB=\"20\"\r\n\r\n\r\n	       timeToIdleSeconds=\"300\"\r\n\r\n\r\n	       timeToLiveSeconds=\"600\"\r\n\r\n\r\n	       memoryStoreEvictionPolicy=\"LFU\"\r\n\r\n\r\n	        /&gt;\r\n\r\n\r\n	 \r\n\r\n\r\n	·   SampleCache2配置\r\n\r\n\r\n	 \r\n\r\n\r\n	Cache名为SampleCache2，内存中最多可以缓存1000个element，超出1000不能输出到磁盘中。缓存是永久有效的。\r\n\r\n\r\n	 \r\n\r\n\r\n	&lt;cache name=\"sampleCache2\"\r\n\r\n\r\n	       maxElementsInMemory=\"1000\"\r\n\r\n\r\n	       eternal=\"true\"\r\n\r\n\r\n	       overflowToDisk=\"false\"\r\n\r\n\r\n	       memoryStoreEvictionPolicy=\"FIFO\"\r\n\r\n\r\n	        /&gt;\r\n\r\n\r\n	 \r\n\r\n\r\n	·   SampleCache3配置\r\n\r\n\r\n	 \r\n\r\n\r\n	Cache名为SampleCache3。可缓存到磁盘。磁盘缓存将会缓存虚拟机重启期的数据。磁盘缓存失效线程运行间隔时间是10分钟。\r\n\r\n\r\n	 \r\n\r\n\r\n	&lt;cache name=\"sampleCache3\"\r\n\r\n\r\n	       maxElementsInMemory=\"500\"\r\n\r\n\r\n	       eternal=\"false\"\r\n\r\n\r\n	       overflowToDisk=\"true\"\r\n\r\n\r\n	       timeToIdleSeconds=\"300\"\r\n\r\n\r\n	       timeToLiveSeconds=\"600\"\r\n\r\n\r\n	       diskPersistent=\"true\"\r\n\r\n\r\n	       diskExpiryThreadIntervalSeconds=\"1\"\r\n\r\n\r\n	       memoryStoreEvictionPolicy=\"LFU\"\r\n\r\n\r\n	        /&gt;\r\n\r\n\r\n	 \r\n\r\n\r\n	·   sampleDistributedCache1配置\r\n\r\n\r\n	 \r\n\r\n\r\n	 \r\n\r\n\r\n	Cache名为sampleDistributedCache1。\r\n\r\n\r\n	 \r\n\r\n\r\n	&lt;cache name=\"sampleDistributedCache1\"\r\n\r\n\r\n	       maxElementsInMemory=\"10\"\r\n\r\n\r\n	       eternal=\"false\"\r\n\r\n\r\n	       timeToIdleSeconds=\"100\"\r\n\r\n\r\n	       timeToLiveSeconds=\"100\"\r\n\r\n\r\n	       overflowToDisk=\"false\"&gt;\r\n\r\n\r\n	    &lt;cacheEventListenerFactory\r\n\r\n\r\n	            class=\"net.sf.ehcache.distribution.RMICacheReplicatorFactory\"/&gt;\r\n\r\n\r\n	    &lt;bootstrapCacheLoaderFactory\r\n\r\n\r\n	            class=\"net.sf.ehcache.distribution.RMIBootstrapCacheLoaderFactory\"/&gt;\r\n\r\n\r\n	&lt;/cache&gt;\r\n\r\n\r\n	 \r\n\r\n\r\n	·   sampleDistributedCache2配置\r\n\r\n\r\n	 \r\n\r\n\r\n	&lt;cache name=\"sampleDistributedCache2\"\r\n\r\n\r\n	       maxElementsInMemory=\"10\"\r\n\r\n\r\n	       eternal=\"false\"\r\n\r\n\r\n	       timeToIdleSeconds=\"100\"\r\n\r\n\r\n	       timeToLiveSeconds=\"100\"\r\n\r\n\r\n	       overflowToDisk=\"false\"&gt;\r\n\r\n\r\n	    &lt;cacheEventListenerFactory\r\n\r\n\r\n	            class=\"net.sf.ehcache.distribution.RMICacheReplicatorFactory\"\r\n\r\n\r\n	            properties=\"replicateAsynchronously=false, replicatePuts=false,\r\n\r\n\r\n	                        replicateUpdates=true, replicateUpdatesViaCopy=true,\r\n\r\n\r\n	                        replicateRemovals=false\"/&gt;\r\n\r\n\r\n	&lt;/cache&gt;\r\n\r\n\r\n	 \r\n\r\n\r\n	·   sampleDistributedCache3配置\r\n\r\n\r\n	 \r\n\r\n\r\n	&lt;!--\r\n\r\n\r\n	Sample distributed cache named sampleDistributedCache3.\r\n\r\n\r\n	This cache replicates using defaults except that the asynchronous replication\r\n\r\n\r\n	interval is set to 200ms.\r\n\r\n\r\n	--&gt;\r\n\r\n\r\n	&lt;cache name=\"sampleDistributedCache3\"\r\n\r\n\r\n	       maxElementsInMemory=\"10\"\r\n\r\n\r\n	       eternal=\"false\"\r\n\r\n\r\n	       timeToIdleSeconds=\"100\"\r\n\r\n\r\n	       timeToLiveSeconds=\"100\"\r\n\r\n\r\n	       overflowToDisk=\"false\"&gt;\r\n\r\n\r\n	    &lt;cacheEventListenerFactory\r\n\r\n\r\n	            class=\"net.sf.ehcache.distribution.RMICacheReplicatorFactory\"\r\n\r\n\r\n	            properties=\"asynchronousReplicationIntervalMillis=200\"/&gt;\r\n\r\n\r\n	&lt;/cache&gt;', '1', '13');
INSERT INTO `c_blog` VALUES ('47', '2', 'linux服务器上环境部署', '<p>\r\n	文章来源:<a href=\"http://kevinflynn.iteye.com/blog/2293768\" target=\"_blank\">http://kevinflynn.iteye.com/blog/2293768</a>\r\n</p>\r\n<p>\r\n	<p>\r\n		阿里云服务器 CentOS7.0\r\n	</p>\r\n	<p>\r\n		<strong>一.JDK的安装</strong>\r\n	</p>\r\n	<p>\r\n		1.查看linux机器是32位还是64位的方法：\r\n	</p>\r\n	<p>\r\n		&nbsp;\r\n	</p>\r\n	<p class=\"p1\">\r\n		$ getconf LONG_BIT\r\n	</p>\r\n	<p class=\"p1\">\r\n		64\r\n	</p>\r\n	<p class=\"p1\">\r\n		2.下载对应系统的jdk版本 &nbsp;linux 64bit &nbsp;jdk1.8\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		&nbsp; &nbsp; &nbsp;下载地址：http://www.oracle.com/technetwork/java/javase/downloads/index.html\r\n	</p>\r\n	<p class=\"p1\">\r\n		&nbsp;\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		&nbsp; &nbsp; &nbsp;http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\r\n	</p>\r\n	<p>\r\n		3.安装正式开始：\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		创建安装目录，在/usr/java下建立安装路径，并将文件考到该路径下：&nbsp;<br />\r\n# mkdir /usr/java\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		&nbsp;\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		1、jdk-6u11-linux-i586.bin 这个是自解压的文件，在linux上安装如下：&nbsp;<br />\r\n# chmod 755 jdk-6u11-linux-i586.bin&nbsp;<br />\r\n# ./jdk-6u11-linux-i586.bin （注意，这个步骤一定要在jdk-6u11-linux-i586.bin所在目录下）<br />\r\n在按提示输入yes后，jdk被解压。\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		出现一行字：Do you aggree to the above license terms? [yes or no]<br />\r\n&nbsp;安装程序在问您是否愿意遵守刚才看过的许可协议。当然要同意了，输入\"y\" 或 \"yes\" 回车。\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		2、若是用jdk-6u11-linux-i586-rpm.bin 这个也是一个自解压文件，不过解压后的文件是jdk-6u11-linux-i586-rpm 包，执行rpm命令装到linux上就可以了。安装如下：&nbsp;<br />\r\n#chmod 755 ./jdk-6u11-linux-i586-rpm<br />\r\n# ./jdk-6u11-linux-i586-rpm .bin&nbsp;<br />\r\n# rpm -ivh jdk-6u11-linux-i586-rpm\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		&nbsp;\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		出现一行字：Do you aggree to the above license terms? [yes or no]<br />\r\n&nbsp;安装程序在问您是否愿意遵守刚才看过的许可协议。当然要同意了，输入\"y\" 或 \"yes\" 回车。<br />\r\n安装软件会将JDK自动安装到 /usr/java/目录下。\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		4.配置\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		#vi /etc/profile<br />\r\n&nbsp;在里面添加如下内容\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		export JAVA_HOME=/usr/java/jdk1.6.0_27\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		export JAVA_BIN=/usr/java/jdk1.6.0_27/bin\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		export PATH=$PATH:$JAVA_HOME/bin\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		export JAVA_HOME JAVA_BIN PATH CLASSPATH\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		让/etc/profile文件修改后立即生效 ,可以使用如下命令:<br />\r\n# . /etc/profile<br />\r\n注意: . 和 /etc/profile 有空格.\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		重启测试<br />\r\n&nbsp;java -version<br />\r\n&nbsp;屏幕输出:<br />\r\n&nbsp;java version \"jdk1.6.0_02\"<br />\r\n&nbsp;Java(TM) 2 Runtime Environment, Standard Edition (build jdk1.6.0_02)<br />\r\n&nbsp;Java HotSpot(TM) Client VM (build jdk1.6.0_02, mixed mode)\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		&nbsp;\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		&nbsp;javac\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		会打印出一些帮助信息，说明安装配置成功\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		&nbsp;\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		<strong>二.Nginx:</strong>\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		参考url:http://www.linuxidc.com/Linux/2015-03/114988.htm\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		参考url:http://www.linuxidc.com/Linux/2015-03/114986.htm\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		1. 从Nginx官网下载Nginx。目前最新的稳定版为：1.6.2\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		2. 将下载下来的Nginx上传到/opt/nginx目录下。运行“tar -zxvf nginx-1.6.2.tar.gz”进行解压。\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		3. 切换到/opt/nginx/nginx-1.6.2目录下，运行./configure进行初始化配置。如出现下面的提示，说明该机器没有安装PCRE，而Nginx需要依赖PCRE，需要手动安装PCRE，见&nbsp;<a href=\"http://www.linuxidc.com/Linux/2015-03/114986.htm\">http://www.linuxidc.com/Linux/2015-03/114986.htm</a>。\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		4. 安装完PCRE后，再次运行./configure进行初始化即可。注意这里生成的配置文件，尤其箭头所指的方向，是启动nginx时的路径。\r\n	</p>\r\n	<p style=\"color:#333333;font-family:\'Microsoft Yahei\', 微软雅黑, arial, 宋体, sans-serif;font-size:16px;text-align:justify;\">\r\n		5. 运行 make install 进行编译。\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		6. 切换到步骤4生成的nginx运行目录下，运行./nginx，启动Nginx。\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		如出现下面所述的错误，在已安装PCRE库的情况下，需要配置PCRE共享库。具体操作看这里&nbsp;<a href=\"http://www.linuxidc.com/Linux/2015-03/114985.htm\">http://www.linuxidc.com/Linux/2015-03/114985.htm</a>&nbsp;。\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		./nginx: error while loading shared libraries: libpcre.so.1: cannot open shared object file: No such file or directory\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		7.&nbsp; 在浏览器中输入IP：端口号，出现如下图所示，说明安装成功。\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		如\r\n出现nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in \r\nuse)。可能是端口号被占用，切换到/usr/local/nginx/conf/目录下，更改nginx.conf下的端口号。也有可能是不小心\r\nnginx重启了多次，关闭nginx进程，重启即可。\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		8. 关闭Nginx\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		使用 ps -ef|grep nginx 查看nginx的进程，可以看到nginx有两个进程：\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		[root@linuxidc sbin]# ps -ef|grep nginx&nbsp;\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		root&nbsp; &nbsp; &nbsp; 7276&nbsp; &nbsp; 1&nbsp; 0 14:21 ?&nbsp; &nbsp; &nbsp; &nbsp; 00:00:00 nginx: master process ./nginx\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		www&nbsp; &nbsp; &nbsp; 7277&nbsp; 7276&nbsp; 0 14:21 ?&nbsp; &nbsp; &nbsp; &nbsp; 00:00:00 nginx: worker process\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		root&nbsp; &nbsp; &nbsp; 7279&nbsp; 5197&nbsp; 0 14:21 pts/1&nbsp; &nbsp; 00:00:00 grep nginx\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		8.1 从容停止nginx\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		kill - QUIT nginx 主进程号\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		8.2 停止nginx所有进程\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		[root@linuxidc sbin]# pkill -9 nginx\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		&nbsp;\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		<strong>三.Tomcat的安装</strong>\r\n	</p>\r\n	<p style=\"text-align:justify;background-color:#fafafc;\">\r\n		1.下载tomcat(http://tomcat.apache.org/)\r\n	</p>\r\n	<p style=\"text-align:justify;background-color:#fafafc;\">\r\n		2.解压缩\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		[root@master ~]# unzip apache-tomcat-6.0.30.zip\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		[root@master ~]# mv apache-tomcat-6.0.30/ /usr/local/\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		[root@master ~]cd /usr/local/\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		[root@master local]# ln -s /usr/local/apache-tomcat-6.0.30/ /usr/local/tomcat\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		[root@master local]# cd tomcat/bin/\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		[root@master bin]#ls\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		[root@master bin]#vim catalina.sh\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		<strong>添加以下内容：</strong>\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		<strong>CATALINA_HOME=/usr/local/apache-tomcat-6.0.30/</strong>\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		[root@master local]#<strong>chmod +x *.sh</strong>\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		<strong>3.启动tomcat服务器</strong>\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		[root@master tomcat]#&nbsp;<strong>/usr/local/tomcat /bin/catalina.sh start</strong>\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		<strong>Using CATALINA_BASE:&nbsp;&nbsp; /usr/local/apache-tomcat-6.0.30/</strong>\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		<strong>Using CATALINA_HOME:&nbsp;&nbsp; /usr/local/apache-tomcat-6.0.30/</strong>\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		<strong>Using CATALINA_TMPDIR: /usr/local/apache-tomcat-6.0.30//temp</strong>\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		<strong>Using JRE_HOME:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /usr/local/jdk1.6.0_05</strong>\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		<strong>Using CLASSPATH:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /usr/local/apache-tomcat-6.0.30//bin/bootstrap.jar</strong>\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		[root@master logs]# cd /usr/local/tomcat/logs/\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		[root@master logs]# tail -f catalina.out\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at java.lang.reflect.Method.invoke(Method.java:597)\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		Jul 4, 2011 11:06:57 AM org.apache.coyote.http11.Http11Protocol pause\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		INFO: Pausing Coyote HTTP/1.1 on http-8080\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		Jul 4, 2011 11:06:58 AM org.apache.catalina.core.StandardService stop\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		INFO: Stopping service Catalina\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		Jul 4, 2011 11:06:58 AM org.apache.coyote.http11.Http11Protocol destroy\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		INFO: Stopping Coyote HTTP/1.1 on http-8080\r\n	</p>\r\n	<p>\r\n		4．在浏览器中输入\r\n	</p>\r\n	<p>\r\n		http://localhost:8080/（如果不是本机，则输入对应的ip地址）\r\n	</p>\r\n	<p>\r\n		测试出现tomcat页面则测试成功\r\n	</p>\r\n	<p>\r\n		ps：需要说明的是tomcat的默认测试页面是放在webapps下面，这个其实是在server.xml文件中配置的，如下所示：\r\n	</p>\r\n	<p>\r\n		&lt;Host name=\"localhost\" &nbsp;appBase=\"webapps\"\r\n	</p>\r\n	<p>\r\n		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unpackWARs=\"true\" autoDeploy=\"true\"\r\n	</p>\r\n	<p>\r\n		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xmlValidation=\"false\" xmlNamespaceAware=\"false\"&gt;\r\n	</p>\r\n	<p>\r\n		[root@SOR_SYS apache-tomcat-6.0.30]# ls\r\n	</p>\r\n	<p>\r\n		LICENSE &nbsp;NOTICE &nbsp;RELEASE-NOTES &nbsp;RUNNING.txt &nbsp;bin &nbsp;conf &nbsp;lib &nbsp;logs &nbsp;temp &nbsp;webapps &nbsp;work\r\n	</p>\r\n	<p>\r\n		&nbsp; &nbsp; &nbsp; &nbsp; 1)webapps文件夹主要用于web应用程序部署，比如你可以把你的应用程序包，如war文件拷到该目录下，容器会自动部署。\r\n	</p>\r\n	<p>\r\n		2)conf文件夹下主要是放置tomcat的服务器的相关配置文件\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		<strong>5.添加应用，再次进行测试</strong>\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		在webapps目录下放测试包（<strong>注意：webaapps目录下面主要是放应用包的.war在tomcat重启访问后会自动解压</strong>）\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		<strong>[root@master webapps]# pwd<br />\r\n/usr/local/tomcat/webapps</strong>\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		<strong>[root@master webapps]# tar -zxvf moni2.tar.gz&nbsp;</strong>\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		<strong>[root@master webapps]# ls<br />\r\ndocs&nbsp; examples&nbsp; host-manager&nbsp; manager</strong>&nbsp;&nbsp;<strong>moni2</strong><strong>&nbsp; moni2.tar.gz&nbsp; ROOT</strong>\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		<strong>[root@master webapps]#&nbsp;/usr/local/tomcat/bin/catalina.sh start（重启tomcat）<br />\r\nUsing CATALINA_BASE:&nbsp;&nbsp; /usr/local/apache-tomcat-6.0.30/<br />\r\nUsing CATALINA_HOME:&nbsp;&nbsp; /usr/local/apache-tomcat-6.0.30/<br />\r\nUsing CATALINA_TMPDIR: /usr/local/apache-tomcat-6.0.30//temp<br />\r\nUsing JRE_HOME:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /usr/local/jdk1.6.0_05<br />\r\nUsing CLASSPATH:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /usr/local/apache-tomcat-6.0.30//bin/bootstrap.jar</strong>\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		<strong>在浏览器中输入如下地址：</strong>\r\n	</p>\r\n	<p style=\"color:#333333;font-family:Arial;\">\r\n		<strong><a href=\"http://192.168.55.229:8080/moni2/\">http://192.168.55.229:8080/moni2/</a></strong>\r\n	</p>\r\n	<p>\r\n		6.修改tomcat的监听端口\r\n	</p>\r\n	<p>\r\n		[root@master ~]# &nbsp;cd &nbsp;/usr/local/tomcat/conf\r\n	</p>\r\n	<p>\r\n		[root@master ~]# ls\r\n	</p>\r\n	<p>\r\n		[root@master ~]# vim server.xml\r\n	</p>\r\n	<p>\r\n		&lt;Server port=\"8005\" shutdown=\"SHUTDOWN\"&gt;【停止tomcat时的端口】\r\n	</p>\r\n	<p>\r\n		&nbsp;&lt;Connector port=\"8081\" protocol=\"HTTP/1.1\"\r\n	</p>\r\n	<p>\r\n		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;connectionTimeout=\"20000\"\r\n	</p>\r\n	<p>\r\n		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;redirectPort=\"8443\" /&gt; 【tomcat默认的监听端口是8080，现在改成8081】\r\n	</p>\r\n	<p>\r\n		&nbsp;&lt;Connector port=\"8009\" protocol=\"AJP/1.3\" redirectPort=\"8443\" /&gt;【apache+tomcat模式时访问tomcat的端口】\r\n	</p>\r\n	<p>\r\n		&nbsp;\r\n	</p>\r\n	<p>\r\n		现在重启tomcat。访问http://192.168.55.229:8081/moni2/【注意：这时就需要修改端口了，嘿嘿。。。】\r\n	</p>\r\n	<p>\r\n		&nbsp;\r\n	</p>\r\n	<p>\r\n		四.MySQL的安装\r\n	</p>\r\n	<p>\r\n		在Linux中安装MySQL，通常为RPM与源码方式安装。对于生产环境而言，由于需要自定义诸如安装路径、数据文件位置、字符集以及支持的存储引擎等多以源码方式来进行安装。之前有写过一篇关于源码安装的文章，Linux下基于源码方式安装MySQL 5.6(<a href=\"http://www.linuxidc.com/Linux/2014-10/108040.htm\">http://www.linuxidc.com/Linux/2014-10/108040.htm</a>)，但不是很完整，因此该文可以作为其补充。以下为具体安装步骤，供大家参考。\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		1、安装前的有关描述<br />\r\n必备的包和工具<br />\r\n&nbsp; gcc/g++ ：MySQL 5.6开始，需要使用g++进行编译。<br />\r\n&nbsp; cmake&nbsp; ：MySQL 5.5开始，使用cmake进行工程管理，cmake需要2.8以上版本。<br />\r\n&nbsp; bison&nbsp; ：MySQL语法解析器需要使用bison进行编译。<br />\r\n&nbsp; ncurses-devel ：用于终端操作的开发包。<br />\r\n&nbsp; zlib&nbsp; &nbsp; ：MySQL使用zlib进行压缩\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		功能需要的包<br />\r\n&nbsp; libxml&nbsp; ：用于XML输入输出方式的支持。<br />\r\n&nbsp; openssl&nbsp; ：使用openssl安全套接字方式通信。<br />\r\n&nbsp; dtrace&nbsp; ：用于诊断MySQL问题。\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		有关MySQL编译参数<br />\r\n&nbsp; CMAKE_BUILD_TYPE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 编译的版本类型：RelWithDebInfo和Debug，不同之处是RelWithDebInfo会进行优化。<br />\r\n&nbsp; CMAKE_INSTALL_PREFIX&nbsp; &nbsp; &nbsp; &nbsp; 指定make install安装的目标路径。<br />\r\n&nbsp; SYSCONFDIR&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 指定配置文件的默认路径。<br />\r\n&nbsp; MYSQL_DATADIR&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 指定data目录的默认路径。<br />\r\n&nbsp; WITH_DEBUG&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 指定是否有debugging信息，一般用于源码调试时，打开WITH_DEBUG，生产环境关闭。<br />\r\n&nbsp; ENABLED_PROFILING&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 指定是否可以使用show profile显示操作执行的详细信息。<br />\r\n&nbsp; DEFAULT_CHARSET&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 指定默认字符集，可以在启动的配置文件中指定。<br />\r\n&nbsp; DEFAULT_COLLATION&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 指定默认字符比较、排序的规则。<br />\r\n&nbsp; WITH_EXTRA_CHARSETS&nbsp; &nbsp; &nbsp; &nbsp; 指定其他可能使用的字符集。<br />\r\n&nbsp; WITH_SSL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 指定SSL的类型，从5.6.6开始默认bundled类型，此外也可以指定SSL库的路径地址。<br />\r\n&nbsp; WITH_ZLIB&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 指定zlib的类型，用于压缩功能。<br />\r\n&nbsp; ENABLED_LOCAL_INFILE&nbsp; &nbsp; &nbsp; &nbsp; 指定是否允许使用load data infile功能。<br />\r\n&nbsp; WITH_EMBEDDED_SERVER&nbsp; &nbsp; &nbsp; &nbsp; 指定是否编译libmysqld嵌入式库。<br />\r\n&nbsp; INSTALL_LAYOUT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 指定安装的布局类型。<br />\r\n&nbsp; WITH_storage_STORAGE_ENGINE 指定编译支持的存储引擎，默认支持MyISAM，MERGE，MEMORY，CSV存储引擎。<br />\r\n&nbsp; 更多详细参数可参考&nbsp;<a href=\"http://dev.mysql.com/doc/refman/5.5/en/source-configuration-options.html\">http://dev.mysql.com/doc/refman/5.5/en/source-configuration-options.html</a>\r\n	</p>\r\n	<p>\r\n		&nbsp;\r\n	</p>\r\n	<p>\r\n		本次安装环境<br />\r\n&nbsp; [root@SZ-RD03 ~]# cat /etc/issue<br />\r\n&nbsp;&nbsp;<a target=\"_blank\" href=\"http://www.linuxidc.com/topicnews.aspx?tid=14\">CentOS</a>&nbsp;release 5.9 (Final)<br />\r\n&nbsp; Kernel \\r on an \\m<br />\r\n&nbsp;&nbsp;<br />\r\n&nbsp; [root@SZ-RD03 ~]# uname -a<br />\r\n&nbsp; Linux SZ-RD03 2.6.18-348.el5 #1 SMP Tue Jan 8 17:53:53 EST 2013 x86_64 x86_64 x86_64 GNU/Linux<br />\r\n&nbsp;&nbsp;<br />\r\n&nbsp; MySQL版本：5.6.12-log Source distribution<br />\r\n&nbsp; 安装目录为：/app/soft/mysql/<br />\r\n&nbsp; 数据目录为：/data/mysqldata&nbsp;<br />\r\n&nbsp; 存储引擎包括：MEMORY，MyISAM，InnoDB等&nbsp;<br />\r\n&nbsp; 字符集为：UTF8\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		2、源码安装MySQL&nbsp;<br />\r\n先安装需要用到的库：<br />\r\n&nbsp; yum -y install gcc gcc-c++<br />\r\n&nbsp; yum -y install ncurses-devel\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		下载所需软件包：<br />\r\n&nbsp; #将下载的文件都放到/usr/local/src目录下，如下<br />\r\n&nbsp; # cd /usr/local/src<br />\r\n&nbsp; # wget&nbsp;<a href=\"http://www.cmake.org/files/v2.8/cmake-2.8.11.1.tar.gz\">http://www.cmake.org/files/v2.8/cmake-2.8.11.1.tar.gz</a><br />\r\n&nbsp; # wget&nbsp;<a href=\"http://ftp.gnu.org/gnu/bison/bison-2.7.tar.gz\">http://ftp.gnu.org/gnu/bison/bison-2.7.tar.gz</a><br />\r\n&nbsp; # wget&nbsp;<a href=\"http://ftp.gnu.org/gnu/m4/m4-1.4.16.tar.gz\">http://ftp.gnu.org/gnu/m4/m4-1.4.16.tar.gz</a><br />\r\n&nbsp; # wget&nbsp;<a href=\"http://www.mysql.com/get/Downloads/MySQL-5.6/mysql-5.6.12.tar.gz/from/http://cdn.mysql.com/\">http://www.mysql.com/get/Downloads/MySQL-5.6/mysql-5.6.12.tar.gz/from/http://cdn.mysql.com/</a>\r\n	</p>\r\n	<p>\r\n		&nbsp;\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		安装cmake编译器<br />\r\n&nbsp; # cd /usr/local/src<br />\r\n&nbsp; # tar -xvf cmake-2.8.11.1.tar.gz<br />\r\n&nbsp; # cd cmake-2.8.11.1<br />\r\n&nbsp; # ./bootstrap<br />\r\n&nbsp; # make &amp;&amp; make install\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		安装m4<br />\r\n&nbsp; # cd /usr/local/src<br />\r\n&nbsp; # tar -xvf m4-1.4.16.tar.gz<br />\r\n&nbsp; # cd m4-1.4.16<br />\r\n&nbsp; # ./configure &amp;&amp; make &amp;&amp; make install\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		安装bison<br />\r\n&nbsp; # cd /usr/local/src<br />\r\n&nbsp; # tar -xvf bison-2.7.tar.gz<br />\r\n&nbsp; # cd bison-2.7<br />\r\n&nbsp; # ./configure &amp;&amp; make &amp;&amp; make install\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		&nbsp;\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		创建mysql用户与组，相关目录<br />\r\n&nbsp; # /usr/sbin/groupadd mysql<br />\r\n&nbsp; # /usr/sbin/useradd -g mysql mysql<br />\r\n&nbsp; # mkdir -p /app/soft/mysql<br />\r\n&nbsp; # chown -R mysql:mysql /app/soft/mysql<br />\r\n&nbsp; # mkdir -p /data/mysqldata<br />\r\n&nbsp; # chown -R mysql:mysql /data/mysqldata/\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		安装mysql<br />\r\n&nbsp; # cd /usr/local/src<br />\r\n&nbsp; # tar -xvf mysql-5.6.12.tar.gz&nbsp;<br />\r\n&nbsp; # export CFLAGS=\"-O3 -g -fno-exceptions -static-libgcc -fno-omit-frame-pointer -fno-strict-aliasing\"<br />\r\n&nbsp; # export CXXFLAGS=\"-O3 -g -fno-exceptions -fno-rtti -static-libgcc -fno-omit-frame-pointer -fno-strict-aliasing\"<br />\r\n&nbsp; # export CXX=g++<br />\r\n&nbsp; # cd mysql-5.6.12<br />\r\n&nbsp; # cmake -DCMAKE_INSTALL_PREFIX=/app/soft/mysql/ -DMYSQL_UNIX_ADDR=/tmp/mysql.sock&nbsp;<br />\r\n&nbsp; &nbsp; -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DWITH_EXTRA_CHARSETS=utf8,gbk&nbsp;&nbsp;<br />\r\n&nbsp; &nbsp; -DWITH_PERFSCHEMA_STORAGE_ENGINE=1 -DWITH_FEDERATED_STORAGE_ENGINE=1 -DWITH_PARTITION_STORAGE_ENGINE=1&nbsp;<br />\r\n&nbsp; &nbsp; -DWITH_ARCHIVE_STORAGE_ENGINE=1 -DMYSQL_DATADIR=/data/mysqldata/ -DSYSCONFDIR=/app/soft/mysql/&nbsp;<br />\r\n&nbsp; &nbsp; -DWITH_SSL=bundled -DENABLED_LOCAL_INFILE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1&nbsp;<br />\r\n&nbsp; &nbsp; -DWITH_BLACKHOLE_STORAGE_ENGINE=1 -DENABLE_DOWNLOADS=1<br />\r\n&nbsp; # make &amp;&amp; make install\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		&nbsp;\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		初始化数据库<br />\r\n&nbsp; # cd /app/soft/mysql/<br />\r\n&nbsp; # ./scripts/mysql_install_db --user=mysql --ldata=/data/mysqldata\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		&nbsp;\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		3、安装后的收尾工作<br />\r\n配置运行环境<br />\r\n&nbsp; # vi /etc/profile<br />\r\n&nbsp; # PATH=/app/soft/mysql/bin:/app/soft/mysql/lib:$PATH<br />\r\n&nbsp; # export PATH<br />\r\n&nbsp; # source /etc/profile\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		创建开机启动<br />\r\n&nbsp; # cp support-files/my-default.cnf /etc/my.cnf&nbsp; #也可以将my.cnf直接复制到安装文件位置<br />\r\n&nbsp; # cp support-files/mysql.server /etc/init.d/mysqld&nbsp;<br />\r\n&nbsp; # chkconfig --level 35 mysqld on&nbsp;<br />\r\n&nbsp; # service mysqld start\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		<br />\r\n查检是否启动成功<br />\r\n&nbsp; netstat -ntlp&nbsp; | grep mysql\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		设置root密码<br />\r\n&nbsp; # mysqladmin -u root password \'xxx\'\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		登陆账号\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		&nbsp; # mysql -uroot -pxxx\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		配置参数<br />\r\n&nbsp; 根据系统及业务需求配置my.cnf文件\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		&nbsp;\r\n	</p>\r\n	<div id=\"\" class=\"dp-highlighter\">\r\n		<div class=\"bar\">\r\n			<div class=\"tools\">\r\n				Python代码 &nbsp;<a><img class=\"star\" src=\"http://kevinflynn.iteye.com/images/icon_star.png\" alt=\"收藏代码\" /></a>\r\n			</div>\r\n		</div>\r\n		<ol class=\"dp-py\">\r\n			<li>\r\n				若出现错误，vim&nbsp;/etc/my.cnf&nbsp;&nbsp;修改其中的参数&nbsp;&nbsp;\r\n			</li>\r\n			<li>\r\n				&nbsp;&nbsp;\r\n			</li>\r\n			<li>\r\n				[client]&nbsp;&nbsp;\r\n			</li>\r\n			<li>\r\n				socket&nbsp;=&nbsp;/var/lib/mysql/mysql.sock&nbsp;&nbsp;\r\n			</li>\r\n			<li>\r\n				default-character-set=utf8&nbsp;&nbsp;\r\n			</li>\r\n			<li>\r\n				&nbsp;&nbsp;\r\n			</li>\r\n			<li>\r\n				&nbsp;&nbsp;\r\n			</li>\r\n			<li>\r\n				[mysqld]&nbsp;&nbsp;\r\n			</li>\r\n			<li>\r\n				datadir=/app/soft/mysql&nbsp;&nbsp;\r\n			</li>\r\n			<li>\r\n				socket=/var/lib/mysql/mysql.sock&nbsp;&nbsp;\r\n			</li>\r\n			<li>\r\n				character-set-server=utf8&nbsp;&nbsp;\r\n			</li>\r\n			<li>\r\n				&nbsp;&nbsp;\r\n			</li>\r\n			<li>\r\n				[mysql]&nbsp;&nbsp;\r\n			</li>\r\n			<li>\r\n				socket=/var/lib/mysql/mysql.sock&nbsp;&nbsp;\r\n			</li>\r\n			<li>\r\n				no-auto-rehash&nbsp;&nbsp;\r\n			</li>\r\n			<li>\r\n				default-character-set=utf8&nbsp;&nbsp;\r\n			</li>\r\n			<li>\r\n				&nbsp;&nbsp;\r\n			</li>\r\n			<li>\r\n				[mysqldump]&nbsp;&nbsp;\r\n			</li>\r\n			<li>\r\n				socket=/var/lib/mysql/mysql.sock&nbsp;&nbsp;\r\n			</li>\r\n			<li>\r\n				&nbsp;&nbsp;\r\n			</li>\r\n			<li>\r\n				[mysqladmin]&nbsp;&nbsp;\r\n			</li>\r\n			<li>\r\n				socket=/var/lib/mysql/mysql.sock&nbsp;&nbsp;\r\n			</li>\r\n		</ol>\r\n	</div>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		&nbsp;\r\n	</p>\r\n	<p style=\"color:#333333;font-family:tahoma, 宋体;text-align:justify;background-color:#fafafc;\">\r\n		&nbsp;\r\n	</p>\r\n	<p style=\"text-indent:2em;color:#333333;font-family:宋体;\">\r\n		操作MySql非常简单，就5步骤，如下：\r\n	</p>\r\n	<p style=\"text-indent:2em;color:#333333;font-family:宋体;\">\r\n		1.进入 mysql：\r\n	</p>\r\n	<div style=\"padding:0px;margin:0px;color:#333333;font-family:宋体;\">\r\n		<div class=\"syntaxhighlighter sql\" style=\"padding:0px;margin-left:0px !important;font-size:1em !important;\">\r\n			<div class=\"toolbar\" style=\"border:none !important;padding:0px !important;margin:0px !important;vertical-align:baseline !important;font-family:Consolas, \'Bitstream Vera Sans Mono\', \'Courier New\', Courier, monospace !important;font-size:10px !important;color:white !important;background:#6ce26c !important;\">\r\n				<a class=\"toolbar_item command_help help\" href=\"http://www.2cto.com/database/201412/357165.html\">?</a>\r\n			</div>\r\n			<table style=\"width:630px;border:0px !important;padding:0px !important;margin:0px !important;height:auto !important;font-family:Consolas, \'Bitstream Vera Sans Mono\', \'Courier New\', Courier, monospace !important;font-size:1em !important;\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"ke-zeroborder\">\r\n				<tbody>\r\n					<tr>\r\n						<td class=\"gutter\" style=\"border:0px !important;vertical-align:baseline !important;color:#AFAFAF !important;\">\r\n							<div class=\"line number1 index0 alt2\" style=\"padding:0px 0.5em 0px 1em !important;margin:0px !important;text-align:right !important;vertical-align:baseline !important;font-size:1em !important;\">\r\n								1\r\n							</div>\r\n						</td>\r\n						<td class=\"code\" style=\"border:0px !important;vertical-align:baseline !important;\">\r\n							<div class=\"container\" style=\"border:0px !important;padding:0px !important;margin:0px !important;vertical-align:baseline !important;font-size:1em !important;\">\r\n								<div class=\"line number1 index0 alt2\" style=\"border:0px !important;padding:0px 1em !important;margin:0px !important;vertical-align:baseline !important;font-size:1em !important;\">\r\n									/usr/local/mysql/bin/mysql -u root -p\r\n								</div>\r\n							</div>\r\n						</td>\r\n					</tr>\r\n				</tbody>\r\n			</table>\r\n		</div>\r\n	</div>\r\n	<p style=\"text-indent:2em;color:#333333;font-family:宋体;\">\r\n		2.使用 mysql库 ：\r\n	</p>\r\n	<div style=\"padding:0px;margin:0px;color:#333333;font-family:宋体;\">\r\n		<div class=\"syntaxhighlighter sql\" style=\"padding:0px;margin-left:0px !important;font-size:1em !important;\">\r\n			<div class=\"toolbar\" style=\"border:none !important;padding:0px !important;margin:0px !important;vertical-align:baseline !important;font-family:Consolas, \'Bitstream Vera Sans Mono\', \'Courier New\', Courier, monospace !important;font-size:10px !important;color:white !important;background:#6ce26c !important;\">\r\n				<a class=\"toolbar_item command_help help\" href=\"http://www.2cto.com/database/201412/357165.html\">?</a>\r\n			</div>\r\n			<table style=\"width:630px;border:0px !important;padding:0px !important;margin:0px !important;height:auto !important;font-family:Consolas, \'Bitstream Vera Sans Mono\', \'Courier New\', Courier, monospace !important;font-size:1em !important;\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"ke-zeroborder\">\r\n				<tbody>\r\n					<tr>\r\n						<td class=\"gutter\" style=\"border:0px !important;vertical-align:baseline !important;color:#AFAFAF !important;\">\r\n							<div class=\"line number1 index0 alt2\" style=\"padding:0px 0.5em 0px 1em !important;margin:0px !important;text-align:right !important;vertical-align:baseline !important;font-size:1em !important;\">\r\n								1\r\n							</div>\r\n						</td>\r\n						<td class=\"code\" style=\"border:0px !important;vertical-align:baseline !important;\">\r\n							<div class=\"container\" style=\"border:0px !important;padding:0px !important;margin:0px !important;vertical-align:baseline !important;font-size:1em !important;\">\r\n								<div class=\"line number1 index0 alt2\" style=\"border:0px !important;padding:0px 1em !important;margin:0px !important;vertical-align:baseline !important;font-size:1em !important;\">\r\n									use mysql;\r\n								</div>\r\n							</div>\r\n						</td>\r\n					</tr>\r\n				</tbody>\r\n			</table>\r\n		</div>\r\n	</div>\r\n	<p style=\"text-indent:2em;color:#333333;font-family:宋体;\">\r\n		3.查看用户表 ：\r\n	</p>\r\n	<div style=\"padding:0px;margin:0px;color:#333333;font-family:宋体;\">\r\n		<div class=\"syntaxhighlighter sql\" style=\"padding:0px;margin-left:0px !important;font-size:1em !important;\">\r\n			<div class=\"toolbar\" style=\"border:none !important;padding:0px !important;margin:0px !important;vertical-align:baseline !important;font-family:Consolas, \'Bitstream Vera Sans Mono\', \'Courier New\', Courier, monospace !important;font-size:10px !important;color:white !important;background:#6ce26c !important;\">\r\n				<a class=\"toolbar_item command_help help\" href=\"http://www.2cto.com/database/201412/357165.html\">?</a>\r\n			</div>\r\n			<table style=\"width:630px;border:0px !important;padding:0px !important;margin:0px !important;height:auto !important;font-family:Consolas, \'Bitstream Vera Sans Mono\', \'Courier New\', Courier, monospace !important;font-size:1em !important;\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"ke-zeroborder\">\r\n				<tbody>\r\n					<tr>\r\n						<td class=\"gutter\" style=\"border:0px !important;vertical-align:baseline !important;color:#AFAFAF !important;\">\r\n							<div class=\"line number1 index0 alt2\" style=\"padding:0px 0.5em 0px 1em !important;margin:0px !important;text-align:right !important;vertical-align:baseline !important;font-size:1em !important;\">\r\n								1\r\n							</div>\r\n						</td>\r\n						<td class=\"code\" style=\"border:0px !important;vertical-align:baseline !important;\">\r\n							<div class=\"container\" style=\"border:0px !important;padding:0px !important;margin:0px !important;vertical-align:baseline !important;font-size:1em !important;\">\r\n								<div class=\"line number1 index0 alt2\" style=\"border:0px !important;padding:0px 1em !important;margin:0px !important;vertical-align:baseline !important;font-size:1em !important;\">\r\n									SELECT`Host`,`User`FROMuser;\r\n								</div>\r\n							</div>\r\n						</td>\r\n					</tr>\r\n				</tbody>\r\n			</table>\r\n		</div>\r\n	</div>\r\n</p>\r\n<p>\r\n	<br />\r\n</p>\r\n<p>\r\n	<br />\r\n</p>\r\n<p>\r\n	更多请查看原文章:<a href=\"http://kevinflynn.iteye.com/blog/2293768\" target=\"_blank\">http://kevinflynn.iteye.com/blog/2293768</a>\r\n</p>', '2016-04-26 09:13:02', null, '1', '文章来源:http://kevinflynn.iteye.com/blog/2293768\r\n\r\n\r\n	\r\n		阿里云服务器CentOS7.0\r\n	\r\n	\r\n		一.JDK的安装\r\n	\r\n	\r\n		1.查看linux机器是32位还是64位的方法：\r\n	\r\n	\r\n		 \r\n	\r\n	\r\n		$ getconf LONG_BIT\r\n	\r\n	\r\n		64\r\n	\r\n	\r\n		2.下载对应系统的jdk版本  linux 64bit  jdk1.8\r\n	\r\n	\r\n		     下载地址：http://www.oracle.com/technetwork/java/javase/downloads/index.html\r\n	\r\n	\r\n		 \r\n	\r\n	\r\n		     http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\r\n	\r\n	\r\n		3.安装正式开始：\r\n	\r\n	\r\n		创建安装目录，在/usr/java下建立安装路径，并将文件考到该路径下： \r\n# mkdir /usr/java\r\n	\r\n	\r\n		 \r\n	\r\n	\r\n		1、jdk-6u11-linux-i586.bin 这个是自解压的文件，在linux上安装如下： \r\n# chmod 755 jdk-6u11-linux-i586.bin \r\n# ./jdk-6u11-linux-i586.bin （注意，这个步骤一定要在jdk-6u11-linux-i586.bin所在目录下）\r\n在按提示输入yes后，jdk被解压。\r\n	\r\n	\r\n		出现一行字：Do you aggree to the above license terms? [yes or no]\r\n 安装程序在问您是否愿意遵守刚才看过的许可协议。当然要同意了，输入\"y\" 或 \"yes\" 回车。\r\n	\r\n	\r\n		2、若是用jdk-6u11-linux-i586-rpm.bin 这个也是一个自解压文件，不过解压后的文件是jdk-6u11-linux-i586-rpm 包，执行rpm命令装到linux上就可以了。安装如下： \r\n#chmod 755 ./jdk-6u11-linux-i586-rpm\r\n# ./jdk-6u11-linux-i586-rpm .bin \r\n# rpm -ivh jdk-6u11-linux-i586-rpm\r\n	\r\n	\r\n		 \r\n	\r\n	\r\n		出现一行字：Do you aggree to the above license terms? [yes or no]\r\n 安装程序在问您是否愿意遵守刚才看过的许可协议。当然要同意了，输入\"y\" 或 \"yes\" 回车。\r\n安装软件会将JDK自动安装到 /usr/java/目录下。\r\n	\r\n	\r\n		4.配置\r\n	\r\n	\r\n		#vi /etc/profile\r\n 在里面添加如下内容\r\n	\r\n	\r\n		export JAVA_HOME=/usr/java/jdk1.6.0_27\r\n	\r\n	\r\n		export JAVA_BIN=/usr/java/jdk1.6.0_27/bin\r\n	\r\n	\r\n		export PATH=$PATH:$JAVA_HOME/bin\r\n	\r\n	\r\n		export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\r\n	\r\n	\r\n		export JAVA_HOME JAVA_BIN PATH CLASSPATH\r\n	\r\n	\r\n		让/etc/profile文件修改后立即生效 ,可以使用如下命令:\r\n# . /etc/profile\r\n注意: . 和 /etc/profile 有空格.\r\n	\r\n	\r\n		重启测试\r\n java -version\r\n 屏幕输出:\r\n java version \"jdk1.6.0_02\"\r\n Java(TM) 2 Runtime Environment, Standard Edition (build jdk1.6.0_02)\r\n Java HotSpot(TM) Client VM (build jdk1.6.0_02, mixed mode)\r\n	\r\n	\r\n		 \r\n	\r\n	\r\n		 javac\r\n	\r\n	\r\n		会打印出一些帮助信息，说明安装配置成功\r\n	\r\n	\r\n		 \r\n	\r\n	\r\n		二.Nginx:\r\n	\r\n	\r\n		参考url:http://www.linuxidc.com/Linux/2015-03/114988.htm\r\n	\r\n	\r\n		参考url:http://www.linuxidc.com/Linux/2015-03/114986.htm\r\n	\r\n	\r\n		1. 从Nginx官网下载Nginx。目前最新的稳定版为：1.6.2\r\n	\r\n	\r\n		2. 将下载下来的Nginx上传到/opt/nginx目录下。运行“tar -zxvf nginx-1.6.2.tar.gz”进行解压。\r\n	\r\n	\r\n		3. 切换到/opt/nginx/nginx-1.6.2目录下，运行./configure进行初始化配置。如出现下面的提示，说明该机器没有安装PCRE，而Nginx需要依赖PCRE，需要手动安装PCRE，见 http://www.linuxidc.com/Linux/2015-03/114986.htm。\r\n	\r\n	\r\n		4. 安装完PCRE后，再次运行./configure进行初始化即可。注意这里生成的配置文件，尤其箭头所指的方向，是启动nginx时的路径。\r\n	\r\n	\r\n		5. 运行 make install 进行编译。\r\n	\r\n	\r\n		6. 切换到步骤4生成的nginx运行目录下，运行./nginx，启动Nginx。\r\n	\r\n	\r\n		如出现下面所述的错误，在已安装PCRE库的情况下，需要配置PCRE共享库。具体操作看这里 http://www.linuxidc.com/Linux/2015-03/114985.htm 。\r\n	\r\n	\r\n		./nginx: error while loading shared libraries: libpcre.so.1: cannot open shared object file: No such file or directory\r\n	\r\n	\r\n		7.  在浏览器中输入IP：端口号，出现如下图所示，说明安装成功。\r\n	\r\n	\r\n		如\r\n出现nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in \r\nuse)。可能是端口号被占用，切换到/usr/local/nginx/conf/目录下，更改nginx.conf下的端口号。也有可能是不小心\r\nnginx重启了多次，关闭nginx进程，重启即可。\r\n	\r\n	\r\n		8. 关闭Nginx\r\n	\r\n	\r\n		使用 ps -ef|grep nginx 查看nginx的进程，可以看到nginx有两个进程：\r\n	\r\n	\r\n		[root@linuxidc sbin]# ps -ef|grep nginx \r\n	\r\n	\r\n		root      7276    1  0 14:21 ?        00:00:00 nginx: master process ./nginx\r\n	\r\n	\r\n		www      7277  7276  0 14:21 ?        00:00:00 nginx: worker process\r\n	\r\n	\r\n		root      7279  5197  0 14:21 pts/1    00:00:00 grep nginx\r\n	\r\n	\r\n		8.1 从容停止nginx\r\n	\r\n	\r\n		kill - QUIT nginx 主进程号\r\n	\r\n	\r\n		8.2 停止nginx所有进程\r\n	\r\n	\r\n		[root@linuxidc sbin]# pkill -9 nginx\r\n	\r\n	\r\n		 \r\n	\r\n	\r\n		三.Tomcat的安装\r\n	\r\n	\r\n		1.下载tomcat(http://tomcat.apache.org/)\r\n	\r\n	\r\n		2.解压缩\r\n	\r\n	\r\n		[root@master ~]# unzip apache-tomcat-6.0.30.zip\r\n	\r\n	\r\n		[root@master ~]# mv apache-tomcat-6.0.30/ /usr/local/\r\n	\r\n	\r\n		[root@master ~]cd /usr/local/\r\n	\r\n	\r\n		[root@master local]# ln -s /usr/local/apache-tomcat-6.0.30/ /usr/local/tomcat\r\n	\r\n	\r\n		[root@master local]# cd tomcat/bin/\r\n	\r\n	\r\n		[root@master bin]#ls\r\n	\r\n	\r\n		[root@master bin]#vim catalina.sh\r\n	\r\n	\r\n		添加以下内容：\r\n	\r\n	\r\n		CATALINA_HOME=/usr/local/apache-tomcat-6.0.30/\r\n	\r\n	\r\n		[root@master local]#chmod +x *.sh\r\n	\r\n	\r\n		3.启动tomcat服务器\r\n	\r\n	\r\n		[root@master tomcat]# /usr/local/tomcat /bin/catalina.sh start\r\n	\r\n	\r\n		Using CATALINA_BASE:   /usr/local/apache-tomcat-6.0.30/\r\n	\r\n	\r\n		Using CATALINA_HOME:   /usr/local/apache-tomcat-6.0.30/\r\n	\r\n	\r\n		Using CATALINA_TMPDIR: /usr/local/apache-tomcat-6.0.30//temp\r\n	\r\n	\r\n		Using JRE_HOME:        /usr/local/jdk1.6.0_05\r\n	\r\n	\r\n		Using CLASSPATH:       /usr/local/apache-tomcat-6.0.30//bin/bootstrap.jar\r\n	\r\n	\r\n		[root@master logs]# cd /usr/local/tomcat/logs/\r\n	\r\n	\r\n		[root@master logs]# tail -f catalina.out\r\n	\r\n	\r\n		        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n	\r\n	\r\n		        at java.lang.reflect.Method.invoke(Method.java:597)\r\n	\r\n	\r\n		        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)\r\n	\r\n	\r\n		        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)\r\n	\r\n	\r\n		Jul 4, 2011 11:06:57 AM org.apache.coyote.http11.Http11Protocol pause\r\n	\r\n	\r\n		INFO: Pausing Coyote HTTP/1.1 on http-8080\r\n	\r\n	\r\n		Jul 4, 2011 11:06:58 AM org.apache.catalina.core.StandardService stop\r\n	\r\n	\r\n		INFO: Stopping service Catalina\r\n	\r\n	\r\n		Jul 4, 2011 11:06:58 AM org.apache.coyote.http11.Http11Protocol destroy\r\n	\r\n	\r\n		INFO: Stopping Coyote HTTP/1.1 on http-8080\r\n	\r\n	\r\n		4．在浏览器中输入\r\n	\r\n	\r\n		http://localhost:8080/（如果不是本机，则输入对应的ip地址）\r\n	\r\n	\r\n		测试出现tomcat页面则测试成功\r\n	\r\n	\r\n		ps：需要说明的是tomcat的默认测试页面是放在webapps下面，这个其实是在server.xml文件中配置的，如下所示：\r\n	\r\n	\r\n		&lt;Host name=\"localhost\"  appBase=\"webapps\"\r\n	\r\n	\r\n		            unpackWARs=\"true\" autoDeploy=\"true\"\r\n	\r\n	\r\n		            xmlValidation=\"false\" xmlNamespaceAware=\"false\"&gt;\r\n	\r\n	\r\n		[root@SOR_SYS apache-tomcat-6.0.30]# ls\r\n	\r\n	\r\n		LICENSE  NOTICE  RELEASE-NOTES  RUNNING.txt  bin  conf  lib  logs  temp  webapps  work\r\n	\r\n	\r\n		        1)webapps文件夹主要用于web应用程序部署，比如你可以把你的应用程序包，如war文件拷到该目录下，容器会自动部署。\r\n	\r\n	\r\n		2)conf文件夹下主要是放置tomcat的服务器的相关配置文件\r\n	\r\n	\r\n		5.添加应用，再次进行测试\r\n	\r\n	\r\n		在webapps目录下放测试包（注意：webaapps目录下面主要是放应用包的.war在tomcat重启访问后会自动解压）\r\n	\r\n	\r\n		[root@master webapps]# pwd\r\n/usr/local/tomcat/webapps\r\n	\r\n	\r\n		[root@master webapps]# tar -zxvf moni2.tar.gz \r\n	\r\n	\r\n		[root@master webapps]# ls\r\ndocs  examples  host-manager  manager  moni2  moni2.tar.gz  ROOT\r\n	\r\n	\r\n		[root@master webapps]# /usr/local/tomcat/bin/catalina.sh start（重启tomcat）\r\nUsing CATALINA_BASE:   /usr/local/apache-tomcat-6.0.30/\r\nUsing CATALINA_HOME:   /usr/local/apache-tomcat-6.0.30/\r\nUsing CATALINA_TMPDIR: /usr/local/apache-tomcat-6.0.30//temp\r\nUsing JRE_HOME:        /usr/local/jdk1.6.0_05\r\nUsing CLASSPATH:       /usr/local/apache-tomcat-6.0.30//bin/bootstrap.jar\r\n	\r\n	\r\n		在浏览器中输入如下地址：\r\n	\r\n	\r\n		http://192.168.55.229:8080/moni2/\r\n	\r\n	\r\n		6.修改tomcat的监听端口\r\n	\r\n	\r\n		[root@master ~]#  cd  /usr/local/tomcat/conf\r\n	\r\n	\r\n		[root@master ~]# ls\r\n	\r\n	\r\n		[root@master ~]# vim server.xml\r\n	\r\n	\r\n		&lt;Server port=\"8005\" shutdown=\"SHUTDOWN\"&gt;【停止tomcat时的端口】\r\n	\r\n	\r\n		 &lt;Connector port=\"8081\" protocol=\"HTTP/1.1\"\r\n	\r\n	\r\n		               connectionTimeout=\"20000\"\r\n	\r\n	\r\n		               redirectPort=\"8443\" /&gt; 【tomcat默认的监听端口是8080，现在改成8081】\r\n	\r\n	\r\n		 &lt;Connector port=\"8009\" protocol=\"AJP/1.3\" redirectPort=\"8443\" /&gt;【apache+tomcat模式时访问tomcat的端口】\r\n	\r\n	\r\n		 \r\n	\r\n	\r\n		现在重启tomcat。访问http://192.168.55.229:8081/moni2/【注意：这时就需要修改端口了，嘿嘿。。。】\r\n	\r\n	\r\n		 \r\n	\r\n	\r\n		四.MySQL的安装\r\n	\r\n	\r\n		在Linux中安装MySQL，通常为RPM与源码方式安装。对于生产环境而言，由于需要自定义诸如安装路径、数据文件位置、字符集以及支持的存储引擎等多以源码方式来进行安装。之前有写过一篇关于源码安装的文章，Linux下基于源码方式安装MySQL 5.6(http://www.linuxidc.com/Linux/2014-10/108040.htm)，但不是很完整，因此该文可以作为其补充。以下为具体安装步骤，供大家参考。\r\n	\r\n	\r\n		1、安装前的有关描述\r\n必备的包和工具\r\n  gcc/g++ ：MySQL 5.6开始，需要使用g++进行编译。\r\n  cmake  ：MySQL 5.5开始，使用cmake进行工程管理，cmake需要2.8以上版本。\r\n  bison  ：MySQL语法解析器需要使用bison进行编译。\r\n  ncurses-devel ：用于终端操作的开发包。\r\n  zlib    ：MySQL使用zlib进行压缩\r\n	\r\n	\r\n		功能需要的包\r\n  libxml  ：用于XML输入输出方式的支持。\r\n  openssl  ：使用openssl安全套接字方式通信。\r\n  dtrace  ：用于诊断MySQL问题。\r\n	\r\n	\r\n		有关MySQL编译参数\r\n  CMAKE_BUILD_TYPE            编译的版本类型：RelWithDebInfo和Debug，不同之处是RelWithDebInfo会进行优化。\r\n  CMAKE_INSTALL_PREFIX        指定make install安装的目标路径。\r\n  SYSCONFDIR                  指定配置文件的默认路径。\r\n  MYSQL_DATADIR              指定data目录的默认路径。\r\n  WITH_DEBUG                  指定是否有debugging信息，一般用于源码调试时，打开WITH_DEBUG，生产环境关闭。\r\n  ENABLED_PROFILING          指定是否可以使用show profile显示操作执行的详细信息。\r\n  DEFAULT_CHARSET            指定默认字符集，可以在启动的配置文件中指定。\r\n  DEFAULT_COLLATION          指定默认字符比较、排序的规则。\r\n  WITH_EXTRA_CHARSETS        指定其他可能使用的字符集。\r\n  WITH_SSL                    指定SSL的类型，从5.6.6开始默认bundled类型，此外也可以指定SSL库的路径地址。\r\n  WITH_ZLIB                  指定zlib的类型，用于压缩功能。\r\n  ENABLED_LOCAL_INFILE        指定是否允许使用load data infile功能。\r\n  WITH_EMBEDDED_SERVER        指定是否编译libmysqld嵌入式库。\r\n  INSTALL_LAYOUT              指定安装的布局类型。\r\n  WITH_storage_STORAGE_ENGINE 指定编译支持的存储引擎，默认支持MyISAM，MERGE，MEMORY，CSV存储引擎。\r\n  更多详细参数可参考 http://dev.mysql.com/doc/refman/5.5/en/source-configuration-options.html\r\n	\r\n	\r\n		 \r\n	\r\n	\r\n		本次安装环境\r\n  [root@SZ-RD03 ~]# cat /etc/issue\r\n  CentOS release 5.9 (Final)\r\n  Kernel \\r on an \\m\r\n  \r\n  [root@SZ-RD03 ~]# uname -a\r\n  Linux SZ-RD03 2.6.18-348.el5 #1 SMP Tue Jan 8 17:53:53 EST 2013 x86_64 x86_64 x86_64 GNU/Linux\r\n  \r\n  MySQL版本：5.6.12-log Source distribution\r\n  安装目录为：/app/soft/mysql/\r\n  数据目录为：/data/mysqldata \r\n  存储引擎包括：MEMORY，MyISAM，InnoDB等 \r\n  字符集为：UTF8\r\n	\r\n	\r\n		2、源码安装MySQL \r\n先安装需要用到的库：\r\n  yum -y install gcc gcc-c++\r\n  yum -y install ncurses-devel\r\n	\r\n	\r\n		下载所需软件包：\r\n  #将下载的文件都放到/usr/local/src目录下，如下\r\n  # cd /usr/local/src\r\n  # wget http://www.cmake.org/files/v2.8/cmake-2.8.11.1.tar.gz\r\n  # wget http://ftp.gnu.org/gnu/bison/bison-2.7.tar.gz\r\n  # wget http://ftp.gnu.org/gnu/m4/m4-1.4.16.tar.gz\r\n  # wget http://www.mysql.com/get/Downloads/MySQL-5.6/mysql-5.6.12.tar.gz/from/http://cdn.mysql.com/\r\n	\r\n	\r\n		 \r\n	\r\n	\r\n		安装cmake编译器\r\n  # cd /usr/local/src\r\n  # tar -xvf cmake-2.8.11.1.tar.gz\r\n  # cd cmake-2.8.11.1\r\n  # ./bootstrap\r\n  # make &amp;&amp; make install\r\n	\r\n	\r\n		安装m4\r\n  # cd /usr/local/src\r\n  # tar -xvf m4-1.4.16.tar.gz\r\n  # cd m4-1.4.16\r\n  # ./configure &amp;&amp; make &amp;&amp; make install\r\n	\r\n	\r\n		安装bison\r\n  # cd /usr/local/src\r\n  # tar -xvf bison-2.7.tar.gz\r\n  # cd bison-2.7\r\n  # ./configure &amp;&amp; make &amp;&amp; make install\r\n	\r\n	\r\n		 \r\n	\r\n	\r\n		创建mysql用户与组，相关目录\r\n  # /usr/sbin/groupadd mysql\r\n  # /usr/sbin/useradd -g mysql mysql\r\n  # mkdir -p /app/soft/mysql\r\n  # chown -R mysql:mysql /app/soft/mysql\r\n  # mkdir -p /data/mysqldata\r\n  # chown -R mysql:mysql /data/mysqldata/\r\n	\r\n	\r\n		安装mysql\r\n  # cd /usr/local/src\r\n  # tar -xvf mysql-5.6.12.tar.gz \r\n  # export CFLAGS=\"-O3 -g -fno-exceptions -static-libgcc -fno-omit-frame-pointer -fno-strict-aliasing\"\r\n  # export CXXFLAGS=\"-O3 -g -fno-exceptions -fno-rtti -static-libgcc -fno-omit-frame-pointer -fno-strict-aliasing\"\r\n  # export CXX=g++\r\n  # cd mysql-5.6.12\r\n  # cmake -DCMAKE_INSTALL_PREFIX=/app/soft/mysql/ -DMYSQL_UNIX_ADDR=/tmp/mysql.sock \r\n    -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DWITH_EXTRA_CHARSETS=utf8,gbk  \r\n    -DWITH_PERFSCHEMA_STORAGE_ENGINE=1 -DWITH_FEDERATED_STORAGE_ENGINE=1 -DWITH_PARTITION_STORAGE_ENGINE=1 \r\n    -DWITH_ARCHIVE_STORAGE_ENGINE=1 -DMYSQL_DATADIR=/data/mysqldata/ -DSYSCONFDIR=/app/soft/mysql/ \r\n    -DWITH_SSL=bundled -DENABLED_LOCAL_INFILE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 \r\n    -DWITH_BLACKHOLE_STORAGE_ENGINE=1 -DENABLE_DOWNLOADS=1\r\n  # make &amp;&amp; make install\r\n	\r\n	\r\n		 \r\n	\r\n	\r\n		初始化数据库\r\n  # cd /app/soft/mysql/\r\n  # ./scripts/mysql_install_db --user=mysql --ldata=/data/mysqldata\r\n	\r\n	\r\n		 \r\n	\r\n	\r\n		3、安装后的收尾工作\r\n配置运行环境\r\n  # vi /etc/profile\r\n  # PATH=/app/soft/mysql/bin:/app/soft/mysql/lib:$PATH\r\n  # export PATH\r\n  # source /etc/profile\r\n	\r\n	\r\n		创建开机启动\r\n  # cp support-files/my-default.cnf /etc/my.cnf  #也可以将my.cnf直接复制到安装文件位置\r\n  # cp support-files/mysql.server /etc/init.d/mysqld \r\n  # chkconfig --level 35 mysqld on \r\n  # service mysqld start\r\n	\r\n	\r\n		\r\n查检是否启动成功\r\n  netstat -ntlp  | grep mysql\r\n	\r\n	\r\n		设置root密码\r\n  # mysqladmin -u root password \'xxx\'\r\n	\r\n	\r\n		登陆账号\r\n	\r\n	\r\n		  # mysql -uroot -pxxx\r\n	\r\n	\r\n		配置参数\r\n  根据系统及业务需求配置my.cnf文件\r\n	\r\n	\r\n		 \r\n	\r\n	\r\n		\r\n			\r\n				Python代码  <img class=\"star\" src=\"http://kevinflynn.iteye.com/images/icon_star.png\" alt=\"收藏代码\" />\r\n			\r\n		\r\n		\r\n			\r\n				若出现错误，vim /etc/my.cnf  修改其中的参数  \r\n			\r\n			\r\n				  \r\n			\r\n			\r\n				[client]  \r\n			\r\n			\r\n				socket = /var/lib/mysql/mysql.sock  \r\n			\r\n			\r\n				default-character-set=utf8  \r\n			\r\n			\r\n				  \r\n			\r\n			\r\n				  \r\n			\r\n			\r\n				[mysqld]  \r\n			\r\n			\r\n				datadir=/app/soft/mysql  \r\n			\r\n			\r\n				socket=/var/lib/mysql/mysql.sock  \r\n			\r\n			\r\n				character-set-server=utf8  \r\n			\r\n			\r\n				  \r\n			\r\n			\r\n				[mysql]  \r\n			\r\n			\r\n				socket=/var/lib/mysql/mysql.sock  \r\n			\r\n			\r\n				no-auto-rehash  \r\n			\r\n			\r\n				default-character-set=utf8  \r\n			\r\n			\r\n				  \r\n			\r\n			\r\n				[mysqldump]  \r\n			\r\n			\r\n				socket=/var/lib/mysql/mysql.sock  \r\n			\r\n			\r\n				  \r\n			\r\n			\r\n				[mysqladmin]  \r\n			\r\n			\r\n				socket=/var/lib/mysql/mysql.sock  \r\n			\r\n		\r\n	\r\n	\r\n		 \r\n	\r\n	\r\n		 \r\n	\r\n	\r\n		操作MySql非常简单，就5步骤，如下：\r\n	\r\n	\r\n		1.进入 mysql：\r\n	\r\n	\r\n		\r\n			\r\n				?\r\n			\r\n			\r\n				\r\n					\r\n						\r\n							\r\n								1\r\n							\r\n						\r\n						\r\n							\r\n								\r\n									/usr/local/mysql/bin/mysql -u root -p\r\n								\r\n							\r\n						\r\n					\r\n				\r\n			\r\n		\r\n	\r\n	\r\n		2.使用 mysql库 ：\r\n	\r\n	\r\n		\r\n			\r\n				?\r\n			\r\n			\r\n				\r\n					\r\n						\r\n							\r\n								1\r\n							\r\n						\r\n						\r\n							\r\n								\r\n									use mysql;\r\n								\r\n							\r\n						\r\n					\r\n				\r\n			\r\n		\r\n	\r\n	\r\n		3.查看用户表 ：\r\n	\r\n	\r\n		\r\n			\r\n				?\r\n			\r\n			\r\n				\r\n					\r\n						\r\n							\r\n								1\r\n							\r\n						\r\n						\r\n							\r\n								\r\n									SELECT`Host`,`User`FROMuser;\r\n								\r\n							\r\n						\r\n					\r\n				\r\n			\r\n		\r\n	\r\n\r\n\r\n	\r\n\r\n\r\n	\r\n\r\n\r\n	更多请查看原文章:http://kevinflynn.iteye.com/blog/2293768', '1', '14');
INSERT INTO `c_blog` VALUES ('48', '2', 'Spring Security简单配置', '<p>\r\n	本文配置是在 一个可用的spring mvc项目之上加入spring security 的权限控制.\r\n</p>\r\n<p>\r\n	所需jar包:\r\n</p>\r\n<p>\r\n	spring-security-config-4.0.0.RELEASE.jar\r\n</p>\r\n<p>\r\n	spring-security-core-4.0.0.RELEASE.jar\r\n</p>\r\n<p>\r\n	spring-security-web-4.0.0.RELEASE.jar\r\n</p>\r\n<p>\r\n	jar包可以在maven库进行下载(<a href=\"http://mvnrepository.com/search?q=spring-security\" target=\"_blank\">http://mvnrepository.com/search?q=spring-security</a>),当然,如果你使用的maven项目,可以直接\r\n</p>\r\n<p>\r\n	直接在pom.xml配置引入(官网有详细配置).\r\n</p>\r\n<h4>\r\n	1, 新建类 SecurityConfig&nbsp; 继承 WebSecurityConfigurerAdapter <br />\r\n</h4>\r\n<p>\r\n	<br />\r\n</p>\r\n<pre class=\"prettyprint lang-java\">@EnableWebSecurity\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n	/**\r\n	 * The name of the configureGlobal method is not important. However, it is\r\n	 * important to only configure AuthenticationManagerBuilder in a class\r\n	 * annotated with either @EnableWebSecurity, @EnableGlobalMethodSecurity, or\r\n	 * \r\n	 * @EnableGlobalAuthentication. Doing otherwise has unpredictable results.\r\n	 * \r\n	 * @param auth\r\n	 * @throws Exception\r\n	 */\r\n	@Autowired\r\n	public void configureGlobal(AuthenticationManagerBuilder auth)\r\n			throws Exception {\r\n		// 指定用户验证\r\n		// auth.inMemoryAuthentication().withUser(\"user1\").password(\"password\").roles(\"USER\");\r\n		\r\n		//数据库验证\r\n		auth.jdbcAuthentication().dataSource(dataSource);\r\n\r\n	}\r\n\r\n	@Autowired\r\n	private DataSource dataSource;\r\n	@Autowired\r\n	private JdbcUserDetailsManager jdbcUserDetailsManager;\r\n	@Autowired\r\n	private CustomAccessDeniedHandler accessDeniedHandler;\r\n	@Autowired\r\n	private CustomAuthenticationProvider authenticationProvider;\r\n	\r\n	@Override\r\n	protected void configure(HttpSecurity http) throws Exception {\r\n		\r\n		/*\r\n		 * 默认配置\r\n		 * http .authorizeRequests() .anyRequest().authenticated() .and()\r\n		 * .formLogin().and() .httpBasic();\r\n		 */\r\n		/**\r\n		 * 匹配规则按顺序\r\n		 */\r\n	\r\n		http.authorizeRequests()\r\n					.antMatchers(\"/user/showUser\").hasRole(\"ADMIN\")\r\n					.antMatchers(\"/user/login\").permitAll()\r\n					.anyRequest().authenticated()\r\n					.and()\r\n					.formLogin()\r\n					.loginPage(\"/user/login\")\r\n					.defaultSuccessUrl(\"/user/showUser\",true)//配置true,登陆成功后默认访问页面,不管之前访问的是不是需要权限认证的页面.\r\n					\r\n					.permitAll()\r\n					.and()\r\n					.exceptionHandling()//配置异常处理 ,默认有\r\n					//.accessDeniedPage(\"/user/403\")//指定禁止访问的错误页面\r\n					.accessDeniedHandler(accessDeniedHandler)//使用自定义的拒绝访问handler,\r\n					\r\n					\r\n					.and()\r\n					.sessionManagement()//session管理  \r\n					.maximumSessions(1)//同一个用户登录,只能存在一个session, 踢出先登录的\r\n					.expiredUrl(\"/user/login?expired\")//session失效访问页面,不需要进行权限检查\r\n					\r\n					//.authenticationProvider(authenticationProvider)//不知道怎么用\r\n		;\r\n		//UsernamePasswordAuthenticationFilter\r\n		//AccessDeniedHandler\r\n		//AuthenticationProvider\r\n		//DaoAuthenticationProvider\r\n	}\r\n\r\n	@Override\r\n	protected void configure(AuthenticationManagerBuilder auth)\r\n			throws Exception {\r\n		//配置使用的userDetailService,这里使用自定义的\r\n		//JdbcUserDetailsManager extends JdbcDaoImpl implements UserDetailsService\r\n		auth.userDetailsService(jdbcUserDetailsManager);\r\n	}\r\n\r\n}\r\n<hr />\r\n</pre>\r\n<p>\r\n	<br />\r\n</p>\r\n<h4>\r\n	2,创建 JdbcUserDetailsManager\r\n</h4>\r\n<p>\r\n	<br />\r\n</p>\r\n<pre class=\"prettyprint lang-java\">public class JdbcUserDetailsManager extends JdbcDaoImpl implements\r\n		UserDetailsService {\r\n\r\n	@Autowired\r\n	private DataSource dataSource;\r\n\r\n	public static final String DEF_USERS_BY_USERNAME_QUERY = \"select username,password,enabled \"\r\n			+ \"from users \" + \"where username = ?\";\r\n	public static final String DEF_GROUP_AUTHORITIES_BY_USERNAME_QUERY = \"select username,authority \"\r\n			+ \"from authorities \" + \"where username = ?\";\r\n	public static final String DEF_AUTHORITIES_BY_USERNAME_QUERY = \"select g.id, g.group_name, ga.authority \"\r\n			+ \"from groups g, group_members gm, group_authorities ga \"\r\n			+ \"where gm.username = ? \"\r\n			+ \"and g.id = ga.group_id \"\r\n			+ \"and g.id = gm.group_id\";;\r\n\r\n	@Override\r\n	public UserDetails loadUserByUsername(String username)\r\n			throws UsernameNotFoundException {\r\n		// TODO Auto-generated method stub\r\n		\r\n		return super.loadUserByUsername(username);\r\n	}\r\n	\r\n	@Override\r\n	protected void addCustomAuthorities(String username,\r\n			Listauthorities) {\r\n		//为所有用户赋予 ROLE_USER的权限\r\n		SimpleGrantedAuthority authority = new SimpleGrantedAuthority(\"ROLE_USER\");\r\n		authorities.add(authority);\r\n	}\r\n}\r\n\r\n</pre>\r\n<p>\r\n	<br />\r\n</p>\r\n<h4>\r\n	3, 扩展AbstractSecurityWebApplicationInitializer,加入自己的配置\r\n</h4>\r\n<pre class=\"prettyprint lang-java\">/**\r\n * The MessageSecurityWebApplicationInitializer will automatically register the\r\n * springSecurityFilterChain Filter for every URL in your application. If\r\n * Filters are added within other WebApplicationInitializer instances we can use @Order\r\n * to control the ordering of the Filter instances.\r\n * \r\n * @author admin\r\n * \r\n */\r\npublic class MessageSecurityWebApplicationInitializer extends\r\n		AbstractSecurityWebApplicationInitializer {\r\n\r\n	protected Class[] getRootConfigClasses() {\r\n		return new Class[] { SecurityConfig.class };\r\n	}\r\n\r\n}\r\n\r\n</pre>\r\n<p>\r\n	<br />\r\n</p>\r\n<h4>\r\n	4,算了,好多,不想写了......\r\n</h4>\r\n<p>\r\n	网上收罗到的参考:\r\n</p>\r\n<p>\r\n	spring security官方网站:<a href=\"http://projects.spring.io/spring-security/\" target=\"_blank\">http://projects.spring.io/spring-security/</a> \r\n</p>\r\n<p>\r\n	spring Security之httpSecurity使用实例:<a href=\"http://www.cnblogs.com/davidwang456/p/4549344.html?utm_source=tuicool\" target=\"_blank\">http://www.cnblogs.com/davidwang456/p/4549344.html?utm_source=tuicool</a> \r\n</p>\r\n<p>\r\n	配置访问限制页面:<a href=\"http://www.mkyong.com/spring-security/customize-http-403-access-denied-page-in-spring-security/\" target=\"_blank\">http://www.mkyong.com/spring-security/customize-http-403-access-denied-page-in-spring-security/</a> \r\n</p>\r\n<p>\r\n	springsecurity的登录验证:<a href=\"http://blog.csdn.net/generalyy0/article/details/8459181\" target=\"_blank\">http://blog.csdn.net/generalyy0/article/details/8459181</a>\r\n</p>\r\n<p>\r\n	<br />\r\n</p>\r\n<p>\r\n	git源代码下载:<a href=\"https://github.com/spring-projects/spring-security\" target=\"_blank\">https://github.com/spring-projects/spring-security</a>\r\n</p>\r\n<br />', '2016-05-05 16:12:14', null, '1', '本文配置是在一个可用的spring mvc项目之上加入spring security 的权限控制.\r\n\r\n\r\n	所需jar包:\r\n\r\n\r\n	spring-security-config-4.0.0.RELEASE.jar\r\n\r\n\r\n	spring-security-core-4.0.0.RELEASE.jar\r\n\r\n\r\n	spring-security-web-4.0.0.RELEASE.jar\r\n\r\n\r\n	jar包可以在maven库进行下载(http://mvnrepository.com/search?q=spring-security),当然,如果你使用的maven项目,可以直接\r\n\r\n\r\n	直接在pom.xml配置引入(官网有详细配置).\r\n\r\n\r\n	1, 新建类 SecurityConfig  继承 WebSecurityConfigurerAdapter \r\n\r\n\r\n	\r\n\r\n@EnableWebSecurity\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n	/**\r\n	 * The name of the configureGlobal method is not important. However, it is\r\n	 * important to only configure AuthenticationManagerBuilder in a class\r\n	 * annotated with either @EnableWebSecurity, @EnableGlobalMethodSecurity, or\r\n	 * \r\n	 * @EnableGlobalAuthentication. Doing otherwise has unpredictable results.\r\n	 * \r\n	 * @param auth\r\n	 * @throws Exception\r\n	 */\r\n	@Autowired\r\n	public void configureGlobal(AuthenticationManagerBuilder auth)\r\n			throws Exception {\r\n		// 指定用户验证\r\n		// auth.inMemoryAuthentication().withUser(\"user1\").password(\"password\").roles(\"USER\");\r\n		\r\n		//数据库验证\r\n		auth.jdbcAuthentication().dataSource(dataSource);\r\n\r\n	}\r\n\r\n	@Autowired\r\n	private DataSource dataSource;\r\n	@Autowired\r\n	private JdbcUserDetailsManager jdbcUserDetailsManager;\r\n	@Autowired\r\n	private CustomAccessDeniedHandler accessDeniedHandler;\r\n	@Autowired\r\n	private CustomAuthenticationProvider authenticationProvider;\r\n	\r\n	@Override\r\n	protected void configure(HttpSecurity http) throws Exception {\r\n		\r\n		/*\r\n		 * 默认配置\r\n		 * http .authorizeRequests() .anyRequest().authenticated() .and()\r\n		 * .formLogin().and() .httpBasic();\r\n		 */\r\n		/**\r\n		 * 匹配规则按顺序\r\n		 */\r\n	\r\n		http.authorizeRequests()\r\n					.antMatchers(\"/user/showUser\").hasRole(\"ADMIN\")\r\n					.antMatchers(\"/user/login\").permitAll()\r\n					.anyRequest().authenticated()\r\n					.and()\r\n					.formLogin()\r\n					.loginPage(\"/user/login\")\r\n					.defaultSuccessUrl(\"/user/showUser\",true)//配置true,登陆成功后默认访问页面,不管之前访问的是不是需要权限认证的页面.\r\n					\r\n					.permitAll()\r\n					.and()\r\n					.exceptionHandling()//配置异常处理 ,默认有\r\n					//.accessDeniedPage(\"/user/403\")//指定禁止访问的错误页面\r\n					.accessDeniedHandler(accessDeniedHandler)//使用自定义的拒绝访问handler,\r\n					\r\n					\r\n					.and()\r\n					.sessionManagement()//session管理  \r\n					.maximumSessions(1)//同一个用户登录,只能存在一个session, 踢出先登录的\r\n					.expiredUrl(\"/user/login?expired\")//session失效访问页面,不需要进行权限检查\r\n					\r\n					//.authenticationProvider(authenticationProvider)//不知道怎么用\r\n		;\r\n		//UsernamePasswordAuthenticationFilter\r\n		//AccessDeniedHandler\r\n		//AuthenticationProvider\r\n		//DaoAuthenticationProvider\r\n	}\r\n\r\n	@Override\r\n	protected void configure(AuthenticationManagerBuilder auth)\r\n			throws Exception {\r\n		//配置使用的userDetailService,这里使用自定义的\r\n		//JdbcUserDetailsManager extends JdbcDaoImpl implements UserDetailsService\r\n		auth.userDetailsService(jdbcUserDetailsManager);\r\n	}\r\n\r\n}\r\n\r\n\r\n\r\n	\r\n\r\n\r\n	2,创建 JdbcUserDetailsManager\r\n\r\n\r\n	\r\n\r\npublic class JdbcUserDetailsManager extends JdbcDaoImpl implements\r\n		UserDetailsService {\r\n\r\n	@Autowired\r\n	private DataSource dataSource;\r\n\r\n	public static final String DEF_USERS_BY_USERNAME_QUERY = \"select username,password,enabled \"\r\n			+ \"from users \" + \"where username = ?\";\r\n	public static final String DEF_GROUP_AUTHORITIES_BY_USERNAME_QUERY = \"select username,authority \"\r\n			+ \"from authorities \" + \"where username = ?\";\r\n	public static final String DEF_AUTHORITIES_BY_USERNAME_QUERY = \"select g.id, g.group_name, ga.authority \"\r\n			+ \"from groups g, group_members gm, group_authorities ga \"\r\n			+ \"where gm.username = ? \"\r\n			+ \"and g.id = ga.group_id \"\r\n			+ \"and g.id = gm.group_id\";;\r\n\r\n	@Override\r\n	public UserDetails loadUserByUsername(String username)\r\n			throws UsernameNotFoundException {\r\n		// TODO Auto-generated method stub\r\n		\r\n		return super.loadUserByUsername(username);\r\n	}\r\n	\r\n	@Override\r\n	protected void addCustomAuthorities(String username,\r\n			Listauthorities) {\r\n		//为所有用户赋予 ROLE_USER的权限\r\n		SimpleGrantedAuthority authority = new SimpleGrantedAuthority(\"ROLE_USER\");\r\n		authorities.add(authority);\r\n	}\r\n}\r\n\r\n\r\n\r\n	\r\n\r\n\r\n	3, 扩展AbstractSecurityWebApplicationInitializer,加入自己的配置\r\n\r\n/**\r\n * The MessageSecurityWebApplicationInitializer will automatically register the\r\n * springSecurityFilterChain Filter for every URL in your application. If\r\n * Filters are added within other WebApplicationInitializer instances we can use @Order\r\n * to control the ordering of the Filter instances.\r\n * \r\n * @author admin\r\n * \r\n */\r\npublic class MessageSecurityWebApplicationInitializer extends\r\n		AbstractSecurityWebApplicationInitializer {\r\n\r\n	protected Class[] getRootConfigClasses() {\r\n		return new Class[] { SecurityConfig.class };\r\n	}\r\n\r\n}\r\n\r\n\r\n\r\n	\r\n\r\n\r\n	4,算了,好多,不想写了......\r\n\r\n\r\n	网上收罗到的参考:\r\n\r\n\r\n	spring security官方网站:http://projects.spring.io/spring-security/ \r\n\r\n\r\n	spring Security之httpSecurity使用实例:http://www.cnblogs.com/davidwang456/p/4549344.html?utm_source=tuicool \r\n\r\n\r\n	配置访问限制页面:http://www.mkyong.com/spring-security/customize-http-403-access-denied-page-in-spring-security/ \r\n\r\n\r\n	springsecurity的登录验证:http://blog.csdn.net/generalyy0/article/details/8459181\r\n\r\n\r\n	\r\n\r\n\r\n	git源代码下载:https://github.com/spring-projects/spring-security', '1', '15');
INSERT INTO `c_blog` VALUES ('49', '2', 'qrcode java二维码生成', '<p>\r\n	来源于网络,原文地址:<a href=\"http://tec.5lulu.com/detail/110d4n2ehcg9a857d.html\" target=\"_blank\">http://tec.5lulu.com/detail/110d4n2ehcg9a857d.html</a> \r\n</p>\r\n<p>\r\n	QRCode开发需要包:<a href=\"http://download.csdn.net/detail/xiaokui_wingfly/7957815\" target=\"_blank\">http://download.csdn.net/detail/xiaokui_wingfly/7957815</a> \r\n</p>\r\n<p>\r\n	QR Code码，是由Denso公司于1994年9月研制的一种<a target=\"_blank\" href=\"http://baike.baidu.com/view/10337.htm\">矩阵</a><a target=\"_blank\" href=\"http://baike.baidu.com/view/132241.htm\">二维码</a>符号，它具有一维条码及其它二维条码\r\n所具有的信息容量大、可靠性高、可表示汉字及图象多种文字信息、保密防伪性强等优点.\r\n</p>\r\n<h4>\r\n	QRCode 方式生成二维码:\r\n</h4>\r\n<p>\r\n<pre class=\"prettyprint lang-java\">  \r\nimport java.awt.Color;  \r\nimport java.awt.Graphics2D;  \r\nimport java.awt.Image;  \r\nimport java.awt.image.BufferedImage;  \r\nimport java.io.File;  \r\nimport java.io.IOException;  \r\nimport java.io.UnsupportedEncodingException;  \r\n  \r\nimport javax.imageio.ImageIO;  \r\n  \r\nimport jp.sourceforge.qrcode.QRCodeDecoder;  \r\nimport jp.sourceforge.qrcode.data.QRCodeImage;  \r\nimport jp.sourceforge.qrcode.exception.DecodingFailedException;  \r\n  \r\nimport com.swetake.util.Qrcode;  \r\n  \r\npublic class QRCodeUtils {  \r\n    /** \r\n     * 编码字符串内容到目标File对象中 \r\n     *  \r\n     * @param encodeddata 编码的内容 \r\n     * @param destFile  生成file文件  1381090722   5029067275903 \r\n     * @throws IOException \r\n     */  \r\n    public static void qrCodeEncode(String encodeddata, File destFile) throws IOException {  \r\n        Qrcode qrcode = new Qrcode();  \r\n        qrcode.setQrcodeErrorCorrect(\'M\');  // 纠错级别（L 7%、M 15%、Q 25%、H 30%）和版本有关  \r\n        qrcode.setQrcodeEncodeMode(\'B\');      \r\n        qrcode.setQrcodeVersion(7);     // 设置Qrcode包的版本  \r\n          \r\n        byte[] d = encodeddata.getBytes(\"GBK\"); // 字符集  \r\n        BufferedImage bi = new BufferedImage(139, 139, BufferedImage.TYPE_INT_RGB);  \r\n        // createGraphics   // 创建图层  \r\n        Graphics2D g = bi.createGraphics();  \r\n          \r\n        g.setBackground(Color.WHITE);   // 设置背景颜色（白色）  \r\n        g.clearRect(0, 0, 139, 139);    // 矩形 X、Y、width、height  \r\n        g.setColor(Color.BLACK);    // 设置图像颜色（黑色）  \r\n  \r\n        if (d.length &gt; 0 &amp;&amp; d.length &lt; 123) {  \r\n            boolean[][] b = qrcode.calQrcode(d);  \r\n            for (int i = 0; i &lt; b.length; i++) {  \r\n                for (int j = 0; j &lt; b.length; j++) {  \r\n                    if (b[j][i]) {  \r\n                        g.fillRect(j * 3 + 2, i * 3 + 2, 3, 3);  \r\n                    }  \r\n                }  \r\n            }  \r\n        }  \r\n          \r\n//      Image img = ImageIO.read(new File(\"D:/tt.png\"));  logo  \r\n//      g.drawImage(img, 25, 55,60,50, null);  \r\n                  \r\n        g.dispose(); // 释放此图形的上下文以及它使用的所有系统资源。调用 dispose 之后，就不能再使用 Graphics 对象  \r\n        bi.flush(); // 刷新此 Image 对象正在使用的所有可重构的资源  \r\n  \r\n        ImageIO.write(bi, \"png\", destFile);  \r\n        System.out.println(\"Input Encoded data is：\" + encodeddata);  \r\n    }  \r\n  \r\n    /** \r\n     * 解析二维码，返回解析内容 \r\n     *  \r\n     * @param imageFile \r\n     * @return \r\n     */  \r\n    public static String qrCodeDecode(File imageFile) {  \r\n        String decodedData = null;  \r\n        QRCodeDecoder decoder = new QRCodeDecoder();  \r\n        BufferedImage image = null;  \r\n        try {  \r\n            image = ImageIO.read(imageFile);  \r\n        } catch (IOException e) {  \r\n            System.out.println(\"Error: \" + e.getMessage());  \r\n        }  \r\n  \r\n        try {  \r\n            decodedData = new String(decoder.decode(new J2SEImage(image)), \"GBK\");  \r\n            System.out.println(\"Output Decoded Data is：\" + decodedData);  \r\n        } catch (DecodingFailedException dfe) {  \r\n            System.out.println(\"Error: \" + dfe.getMessage());  \r\n        } catch (UnsupportedEncodingException e) {  \r\n            e.printStackTrace();  \r\n        }  \r\n        return decodedData;  \r\n    }  \r\n  \r\n    public static void main(String[] args) {  \r\n        String FilePath = \"d:/qrcode.png\";  \r\n        File qrFile = new File(FilePath);  \r\n  \r\n        // 二维码内容  \r\n        String encodeddata = \"Hello X-rapido\";  \r\n        try {  \r\n            QRCodeUtils.qrCodeEncode(encodeddata, qrFile);  \r\n        } catch (IOException e) {  \r\n            e.printStackTrace();  \r\n        }  \r\n  \r\n        // 解码  \r\n        String reText = QRCodeUtils.qrCodeDecode(qrFile);  \r\n        System.out.println(reText);  \r\n    }  \r\n}  \r\n  \r\nclass J2SEImage implements QRCodeImage {  \r\n    BufferedImage image;  \r\n  \r\n    public J2SEImage(BufferedImage image) {  \r\n        this.image = image;  \r\n    }  \r\n  \r\n    public int getWidth() {  \r\n        return image.getWidth();  \r\n    }  \r\n  \r\n    public int getHeight() {  \r\n        return image.getHeight();  \r\n    }  \r\n  \r\n    public int getPixel(int x, int y) {  \r\n        return image.getRGB(x, y);  \r\n    }  \r\n}  </pre>\r\n</p>\r\n<p>\r\n	<br />\r\n</p>\r\n其他参考:<a href=\"http://blog.csdn.net/typa01_kk/article/details/46676391\" target=\"_blank\">http://blog.csdn.net/typa01_kk/article/details/46676391</a><br />', '2016-05-06 17:03:55', null, '2', '来源于网络,原文地址:http://tec.5lulu.com/detail/110d4n2ehcg9a857d.html\r\n\r\n\r\n	QRCode开发需要包:http://download.csdn.net/detail/xiaokui_wingfly/7957815 \r\n\r\n\r\n	QR Code码，是由Denso公司于1994年9月研制的一种矩阵二维码符号，它具有一维条码及其它二维条码\r\n所具有的信息容量大、可靠性高、可表示汉字及图象多种文字信息、保密防伪性强等优点.\r\n\r\n\r\n	QRCode 方式生成二维码:\r\n\r\n\r\n  \r\nimport java.awt.Color;  \r\nimport java.awt.Graphics2D;  \r\nimport java.awt.Image;  \r\nimport java.awt.image.BufferedImage;  \r\nimport java.io.File;  \r\nimport java.io.IOException;  \r\nimport java.io.UnsupportedEncodingException;  \r\n  \r\nimport javax.imageio.ImageIO;  \r\n  \r\nimport jp.sourceforge.qrcode.QRCodeDecoder;  \r\nimport jp.sourceforge.qrcode.data.QRCodeImage;  \r\nimport jp.sourceforge.qrcode.exception.DecodingFailedException;  \r\n  \r\nimport com.swetake.util.Qrcode;  \r\n  \r\npublic class QRCodeUtils {  \r\n    /** \r\n     * 编码字符串内容到目标File对象中 \r\n     *  \r\n     * @param encodeddata 编码的内容 \r\n     * @param destFile  生成file文件  1381090722   5029067275903 \r\n     * @throws IOException \r\n     */  \r\n    public static void qrCodeEncode(String encodeddata, File destFile) throws IOException {  \r\n        Qrcode qrcode = new Qrcode();  \r\n        qrcode.setQrcodeErrorCorrect(\'M\');  // 纠错级别（L 7%、M 15%、Q 25%、H 30%）和版本有关  \r\n        qrcode.setQrcodeEncodeMode(\'B\');      \r\n        qrcode.setQrcodeVersion(7);     // 设置Qrcode包的版本  \r\n          \r\n        byte[] d = encodeddata.getBytes(\"GBK\"); // 字符集  \r\n        BufferedImage bi = new BufferedImage(139, 139, BufferedImage.TYPE_INT_RGB);  \r\n        // createGraphics   // 创建图层  \r\n        Graphics2D g = bi.createGraphics();  \r\n          \r\n        g.setBackground(Color.WHITE);   // 设置背景颜色（白色）  \r\n        g.clearRect(0, 0, 139, 139);    // 矩形 X、Y、width、height  \r\n        g.setColor(Color.BLACK);    // 设置图像颜色（黑色）  \r\n  \r\n        if (d.length &gt; 0 &amp;&amp; d.length &lt; 123) {  \r\n            boolean[][] b = qrcode.calQrcode(d);  \r\n            for (int i = 0; i &lt; b.length; i++) {  \r\n                for (int j = 0; j &lt; b.length; j++) {  \r\n                    if (b[j][i]) {  \r\n                        g.fillRect(j * 3 + 2, i * 3 + 2, 3, 3);  \r\n                    }  \r\n                }  \r\n            }  \r\n        }  \r\n          \r\n//      Image img = ImageIO.read(new File(\"D:/tt.png\"));  logo  \r\n//      g.drawImage(img, 25, 55,60,50, null);  \r\n                  \r\n        g.dispose(); // 释放此图形的上下文以及它使用的所有系统资源。调用 dispose 之后，就不能再使用 Graphics 对象  \r\n        bi.flush(); // 刷新此 Image 对象正在使用的所有可重构的资源  \r\n  \r\n        ImageIO.write(bi, \"png\", destFile);  \r\n        System.out.println(\"Input Encoded data is：\" + encodeddata);  \r\n    }  \r\n  \r\n    /** \r\n     * 解析二维码，返回解析内容 \r\n     *  \r\n     * @param imageFile \r\n     * @return \r\n     */  \r\n    public static String qrCodeDecode(File imageFile) {  \r\n        String decodedData = null;  \r\n        QRCodeDecoder decoder = new QRCodeDecoder();  \r\n        BufferedImage image = null;  \r\n        try {  \r\n            image = ImageIO.read(imageFile);  \r\n        } catch (IOException e) {  \r\n            System.out.println(\"Error: \" + e.getMessage());  \r\n        }  \r\n  \r\n        try {  \r\n            decodedData = new String(decoder.decode(new J2SEImage(image)), \"GBK\");  \r\n            System.out.println(\"Output Decoded Data is：\" + decodedData);  \r\n        } catch (DecodingFailedException dfe) {  \r\n            System.out.println(\"Error: \" + dfe.getMessage());  \r\n        } catch (UnsupportedEncodingException e) {  \r\n            e.printStackTrace();  \r\n        }  \r\n        return decodedData;  \r\n    }  \r\n  \r\n    public static void main(String[] args) {  \r\n        String FilePath = \"d:/qrcode.png\";  \r\n        File qrFile = new File(FilePath);  \r\n  \r\n        // 二维码内容  \r\n        String encodeddata = \"Hello X-rapido\";  \r\n        try {  \r\n            QRCodeUtils.qrCodeEncode(encodeddata, qrFile);  \r\n        } catch (IOException e) {  \r\n            e.printStackTrace();  \r\n        }  \r\n  \r\n        // 解码  \r\n        String reText = QRCodeUtils.qrCodeDecode(qrFile);  \r\n        System.out.println(reText);  \r\n    }  \r\n}  \r\n  \r\nclass J2SEImage implements QRCodeImage {  \r\n    BufferedImage image;  \r\n  \r\n    public J2SEImage(BufferedImage image) {  \r\n        this.image = image;  \r\n    }  \r\n  \r\n    public int getWidth() {  \r\n        return image.getWidth();  \r\n    }  \r\n  \r\n    public int getHeight() {  \r\n        return image.getHeight();  \r\n    }  \r\n  \r\n    public int getPixel(int x, int y) {  \r\n        return image.getRGB(x, y);  \r\n    }  \r\n}  \r\n\r\n\r\n	\r\n\r\n其他参考:http://blog.csdn.net/typa01_kk/article/details/46676391', '1', '16');
